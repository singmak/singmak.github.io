{"version":3,"file":"component---src-pages-post-mdx-fields-slug-tsx-content-file-path-posts-2022-12-18-nginx-proxy-server-mdx-cc8c9b594487643afd8b.js","mappings":"6KAGA,SAASA,EAAkBC,GACzB,MAAMC,EAAcC,OAAOC,OAAO,CAChCC,EAAG,IACHC,KAAM,OACNC,IAAK,MACLC,KAAM,OACNC,GAAI,KACJC,GAAI,OACHC,EAAAA,EAAAA,MAAsBV,EAAMW,YAC/B,OAAOC,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMA,EAAAA,cAAoBX,EAAYG,EAAG,KAAM,gHAAiHQ,EAAAA,cAAoBX,EAAYI,KAAM,KAAM,gBAAiB,KAAM,KAAMO,EAAAA,cAAoBX,EAAYG,EAAG,KAAM,0SAA2S,KAAMQ,EAAAA,cAAoBX,EAAYG,EAAG,KAAM,8HAA+HQ,EAAAA,cAAoBX,EAAYI,KAAM,KAAM,gBAAiB,+BAAgCO,EAAAA,cAAoBX,EAAYI,KAAM,KAAM,KAAM,OAAQO,EAAAA,cAAoBX,EAAYI,KAAM,KAAM,eAAgB,KAAMO,EAAAA,cAAoBX,EAAYK,IAAK,KAAMM,EAAAA,cAAoBX,EAAYI,KAAM,KAAM,obAAub,KAAMO,EAAAA,cAAoBX,EAAYM,KAAM,CACviDM,wBAAyB,CACvBC,OAAQ,utEAER,KAAMF,EAAAA,cAAoBX,EAAYO,GAAI,KAAM,KAAMI,EAAAA,cAAoBX,EAAYQ,GAAI,KAAM,0DAA2D,KAAMG,EAAAA,cAAoBX,EAAYQ,GAAI,KAAM,0FAA2F,KAAMG,EAAAA,cAAoBX,EAAYQ,GAAI,KAAM,gIAAiI,MAC7d,CAKA,MAJA,SAAoBT,QAAK,IAALA,IAAAA,EAAQ,CAAC,GAC3B,MAAOe,QAASC,GAAad,OAAOC,OAAO,CAAC,GAAGO,EAAAA,EAAAA,MAAsBV,EAAMW,YAC3E,OAAOK,EAAYJ,EAAAA,cAAoBI,EAAWhB,EAAOY,EAAAA,cAAoBb,EAAmBC,IAAUD,EAAkBC,EAC9H,E,4DCdA,MAAMiB,EAAWC,IACf,IAAIC,EAAuBC,EAAWC,EAAwBC,EAAYC,EAAuBC,EAAYC,EAC7G,IAAI,KAACC,EAAI,SAAEC,GAAYT,EACvB,MAAMU,EAAoP,QAAvOT,EAAmD,QAA1BC,EAAYM,EAAKG,WAA+B,IAAdT,GAAqF,QAApDC,EAAyBD,EAAUU,mBAAoD,IAA3BT,OAAtE,EAAmHA,EAAuBU,aAA6C,IAA1BZ,EAAmCA,EAAwB,YAE7T,OADAa,EAAAA,EAAAA,YAAU,KAAMC,EAAAA,EAAAA,GAAQ,WAAYL,IAAY,IACzChB,EAAAA,cAAoBsB,EAAAA,EAAa,CACtCN,UAAWA,GACVhB,EAAAA,cAAoBuB,EAAAA,EAAW,CAChCC,SAAU,KACVC,GAAI,CACFC,QAAS,IAEV1B,EAAAA,cAAoB2B,EAAAA,EAAY,CACjCC,UAAW,KACXH,GAAI,CACFI,SAAU,CACRC,GAAI,OACJC,GAAI,YAGqB,QAA3BrB,EAAaI,EAAKG,WAAgC,IAAfP,GAAsF,QAApDC,EAAwBD,EAAWQ,mBAAmD,IAA1BP,OAAtE,EAAkHA,EAAsBQ,OAAQnB,EAAAA,cAAoB2B,EAAAA,EAAY,CAC7OC,UAAW,KACkB,QAA3BhB,EAAaE,EAAKG,WAAgC,IAAfL,GAAsF,QAApDC,EAAwBD,EAAWM,mBAAmD,IAA1BL,OAAtE,EAAkHA,EAAsBmB,MAAOhC,EAAAA,cAAoBiC,EAAAA,EAAK,CACrOR,GAAI,CACF,IAAO,CACLC,QAAS,EACTQ,WAAY,UAGflC,EAAAA,cAAoB,MAAO,MAAOA,EAAAA,cAAoBmC,EAAAA,GAAa,CACpEpC,WAAY,CACVN,KAAM2C,EAAAA,IAEPrB,KAAY,EAIF,SAASsB,EAAiBjD,GACvC,OAAOY,EAAAA,cAAoBK,EAAUjB,EAAOY,EAAAA,cAAoBsC,EAAqBlD,GACvF,C","sources":["webpack://singsdev/./posts/2022-12-18-nginx-proxy-server.mdx","webpack://singsdev/./src/pages/post/{mdx.fields__slug}.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    code: \"code\",\n    pre: \"pre\",\n    span: \"span\",\n    ol: \"ol\",\n    li: \"li\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"If you limit the access to your services/web pages with an external auth service, you can do that with Nginx \", React.createElement(_components.code, null, \"auth_request\"), \".\"), \"\\n\", React.createElement(_components.p, null, \"This can be handy for the case that you cannot change the source code of the services that you owned so you cannot just directly modify the codes to add authentication logic or you just want to share the same authentication service with all the services/web pages routed from the Nginx service.\"), \"\\n\", React.createElement(_components.p, null, \"And the setup is quite simple, just need to define one location for the path to the authorize request, and then define the \", React.createElement(_components.code, null, \"auth_request\"), \" of the service at location \", React.createElement(_components.code, null, \"/\"), \" as \", React.createElement(_components.code, null, \"/authorize\")), \"\\n\", React.createElement(_components.pre, null, React.createElement(_components.code, null, \"location / {\\n    auth_request /authorize;\\n    proxy_pass ${SERVICE_HOST}; # proxy to Service A\\n    proxy_ssl_server_name on;\\n\\n    proxy_set_header Host $tableau_host;\\n}\\n\\nlocation = /authorize {\\n    proxy_set_header X-Original-URI $request_uri;\\n    proxy_set_header X-Original-METHOD $request_method;\\n    proxy_pass_request_body off;\\n    proxy_set_header Content-Length \\\"\\\";\\n\\n    proxy_pass ${AUTH_HOST}/authorize;\\n}\\n\")), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 441px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/aee68e913fdb91347399baba5dd01ddc/efc6e/nginx-authorizer.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACzklEQVR42m2UbW/aZhSG+cX7vq3aT9jHrlMnTfuySpMitWqVbl2XJgrvEAMBTEggYDBg/AI2BmyI4dqxnTXqVKQbPz4Wl8859y0yJJ9j+r29Z7fIsluW2bslucYqPurpPpJnR6+cyo1VglWVcP4PmX105HA4pNxgyMDIUx0pKFqF1qwhatOcNUU1UZ3GtI7rFMGvchQIq6sExrrGzvxERtUDTG+fArcDtHmZN7lTXp3+Tn0sgMGa5nhCy4jhLYG2BZh2lAA9OXvFJ6DjBazWW5Ieg4F0WKB0V6Gs5lGnTXrWiJ55T9+6EXUF2MKLgesr9rKatXOD79zKWWFvnZGJOWEYsAn2CVCbFnl7d84f3T/5tfmaV+23one8bJzwW/ONjHyddBg5OZbzLkEYsXs44C8nbGd/kxnrOqPxCGexIlx2aHU/8kvlhO+zP/HN2Y98e/mcZ9kX/JD7me+yzykPqhj6BVbvL2Z6j8FQQ9M03KWNPxFgp9Oh3+8R7CLYycN5CdXscGeqtI0mDTGoI2N25yq3UmsaLVaLioxcwbdbRNFDYup60ROXP6Yjx7E5Pu6wPy1Qm6pcy/Lb5g2lfhVFbwhIakabemyKnbp8EEN8o8hqVkgM2lmfnoD/xca1sxh2BVNkyw9HowuMeRHLqWDZZUyrRCjZ4zEyBzlHy9jlurh89iXwKLE5uoXPbz/4HazhJdt5XmoxRJFOlEeYxCbO4kZqvmTRr30NOJRMFQgdhbHWZaiNUVWV/n1fYlFnPNXp6WYK39Qweh84e/cCTZLAtvH1DvGLbGyFxcKlXr9GUWq43kYM6OLZqkSmL93FpiisZ5eMb07xJudPwf4CGGg8LPL4sxy2XmXjTQg3Hlt3SGBfJc4m8mXseEzpkqCRXuMdWuf/N2XAYvieW+WEUfs1wfyC0Mrx4GRl+YVk+bEOy4IoPktNGoiW+eSPIjA+8C85OwFdYYymeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"nginx-authorize\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/aee68e913fdb91347399baba5dd01ddc/efc6e/nginx-authorizer.png\\\"\\n        srcset=\\\"/static/aee68e913fdb91347399baba5dd01ddc/5a46d/nginx-authorizer.png 300w,\\n/static/aee68e913fdb91347399baba5dd01ddc/efc6e/nginx-authorizer.png 441w\\\"\\n        sizes=\\\"(max-width: 441px) 100vw, 441px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"The client application access service A through Nginx.\"), \"\\n\", React.createElement(_components.li, null, \"Nginx routes the requests and authenticate the requests with the Authorization service\"), \"\\n\", React.createElement(_components.li, null, \"Authorization service can use the Cookies passed from the client or other data sent in the requests to authenticate the user\"), \"\\n\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/Users/singdev/dev/sing/singmak.github.io/posts/2022-12-18-nginx-proxy-server.mdx\";\nimport React, {useEffect} from 'react';\nimport {MDXProvider} from '@mdx-js/react';\nimport PageWrapper from '../../components/PageWrapper';\nimport {Box, Container, Typography} from '@mui/material';\nimport {Code} from '../../components/Code';\nimport {logPage} from '../../analytics';\nconst BlogPost = _ref => {\n  var _data$mdx$frontmatter, _data$mdx, _data$mdx$frontmatter2, _data$mdx2, _data$mdx2$frontmatte, _data$mdx3, _data$mdx3$frontmatte;\n  let {data, children} = _ref;\n  const pageTitle = (_data$mdx$frontmatter = (_data$mdx = data.mdx) === null || _data$mdx === void 0 ? void 0 : (_data$mdx$frontmatter2 = _data$mdx.frontmatter) === null || _data$mdx$frontmatter2 === void 0 ? void 0 : _data$mdx$frontmatter2.title) !== null && _data$mdx$frontmatter !== void 0 ? _data$mdx$frontmatter : 'Blog Post';\n  useEffect(() => logPage('BlogPost', pageTitle), []);\n  return React.createElement(PageWrapper, {\n    pageTitle: pageTitle\n  }, React.createElement(Container, {\n    maxWidth: \"md\",\n    sx: {\n      padding: 5\n    }\n  }, React.createElement(Typography, {\n    component: \"h1\",\n    sx: {\n      fontSize: {\n        xs: '2rem',\n        md: '2.5rem'\n      }\n    }\n  }, (_data$mdx2 = data.mdx) === null || _data$mdx2 === void 0 ? void 0 : (_data$mdx2$frontmatte = _data$mdx2.frontmatter) === null || _data$mdx2$frontmatte === void 0 ? void 0 : _data$mdx2$frontmatte.title), React.createElement(Typography, {\n    component: \"p\"\n  }, (_data$mdx3 = data.mdx) === null || _data$mdx3 === void 0 ? void 0 : (_data$mdx3$frontmatte = _data$mdx3.frontmatter) === null || _data$mdx3$frontmatte === void 0 ? void 0 : _data$mdx3$frontmatte.date), React.createElement(Box, {\n    sx: {\n      'img': {\n        padding: 1,\n        background: '#fff'\n      }\n    }\n  }, React.createElement(\"div\", null), React.createElement(MDXProvider, {\n    components: {\n      code: Code\n    }\n  }, children))));\n};\nconst query = \"490989764\";\nBlogPost\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(BlogPost, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n"],"names":["_createMdxContent","props","_components","Object","assign","p","code","pre","span","ol","li","_provideComponents","components","React","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","BlogPost","_ref","_data$mdx$frontmatter","_data$mdx","_data$mdx$frontmatter2","_data$mdx2","_data$mdx2$frontmatte","_data$mdx3","_data$mdx3$frontmatte","data","children","pageTitle","mdx","frontmatter","title","useEffect","logPage","PageWrapper","Container","maxWidth","sx","padding","Typography","component","fontSize","xs","md","date","Box","background","MDXProvider","Code","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}