{
    "componentChunkName": "component---src-pages-post-mdx-slug-tsx",
    "path": "/post/2022-12-18-nginx-proxy-server/",
    "result": {"data":{"mdx":{"frontmatter":{"title":"Nginx auth_request","date":"December 18, 2022","description":"If you limit the access to your services/web pages with an external auth service, you can do that with Nginx auth_request."},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Nginx auth_request\",\n  \"date\": \"2022-12-18\",\n  \"description\": \"If you limit the access to your services/web pages with an external auth service, you can do that with Nginx auth_request.\",\n  \"tags\": [\"devops\", \"nginx\", \"backend\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"If you limit the access to your services/web pages with an external auth service, you can do that with Nginx \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auth_request\"), \".\"), mdx(\"p\", null, \"This can be handy for the case that you cannot change the source code of the services that you owned so you cannot just directly modify the codes to add authentication logic or you just want to share the same authentication service with all the services/web pages routed from the Nginx service.\"), mdx(\"p\", null, \"And the setup is quite simple, just need to define one location for the path to the authorize request, and then define the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"auth_request\"), \" of the service at location \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/authorize\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"location / {\\n    auth_request /authorize;\\n    proxy_pass ${SERVICE_HOST}; # proxy to Service A\\n    proxy_ssl_server_name on;\\n\\n    proxy_set_header Host $tableau_host;\\n}\\n\\nlocation = /authorize {\\n    proxy_set_header X-Original-URI $request_uri;\\n    proxy_set_header X-Original-METHOD $request_method;\\n    proxy_pass_request_body off;\\n    proxy_set_header Content-Length \\\"\\\";\\n\\n    proxy_pass ${AUTH_HOST}/authorize;\\n}\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"441px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/aee68e913fdb91347399baba5dd01ddc/efc6e/nginx-authorizer.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"68.33333333333333%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvElEQVQ4y22TW4/bVBSF84ORkHjhnSdeEOIB8YIEghYhJJDQFJi2YqpeMvEtjnOx00kySSY33xM7TpzLOP5Qjs20UnukdXzO8dbS2nuvXUGsvNhPB7KVzH4pcYwUDuJcKyE94LiSyCP5A5wimUp2yrnPcvIzZ34kXSkYM436WKU5q9OxW3QWJu1FQ6C5MOjbKnksw1ojX2uwrpdfjUq4yTGnaaHxdGAfaUiDGo+f/MJT9W8sZ44+WGM6Fm27Rcs2uXUa5JEkCFir5VkpCNebHX605XC8Fwp3kYp+pyKZVfS+TN+7ZeBOGfg3jIIeXbfLwNELhYlGGtRJwgFb3xBpV/a73bl4JJst2TFlt1SQxjK/957z2PqLn9t/8qv1hEedC75r/MbTwWtGrkG2uiZxJOIo5D6DzTZl4zeoTCYTZrM584VNEocs56/5R7/kS+lHPr36ms9efMPnr77li+vv+eTqK35qXdC7U4imz5n232A7Hv3eDa6/ZB28pWJ1u5xhOy6QsVupdJwmPa+L5XRozg2akwZvXZMb16TjmNy6OiQK9yuFTWwLh6SbiJ2vUhF2ycsunw6kSwV9bojitxwTY96mNlBoOxYtu4NhW/QcnVPZlEMoES0Udr4kGlTh/XU6CP/ZnoTjq7i+zMKpMp68xAtUHE/B8WTCQCaPFfK4sEq2rAky0eVC3Ttj57Fa/pTIY53UN/CHV8VbfLaGXtpFK2I3OmwbD/eHlN8RasLx4aLFcHjLaDyh02kTOH32K4PmMGaz7MJaFrH1V4+o/fsDO68KSf3jhMQSUTBiMnOpVq8ZjiYkSULiafj+HYeoJYx8jrX7lyx6lxzDoqYfEJ4ilb1fJZy+YeVapElAmvgkflt0lUQupqOsn0j3YykXo3ckWymMzQv6xh8Eo2fifgxr8P/sxlpJpgqC93FW+B/NtgNSRX+xogAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"nginx-authorize\",\n    \"title\": \"nginx-authorize\",\n    \"src\": \"/static/aee68e913fdb91347399baba5dd01ddc/efc6e/nginx-authorizer.png\",\n    \"srcSet\": [\"/static/aee68e913fdb91347399baba5dd01ddc/5a46d/nginx-authorizer.png 300w\", \"/static/aee68e913fdb91347399baba5dd01ddc/efc6e/nginx-authorizer.png 441w\"],\n    \"sizes\": \"(max-width: 441px) 100vw, 441px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The client application access service A through Nginx.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Nginx routes the requests and authenticate the requests with the Authorization service\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Authorization service can use the Cookies passed from the client or other data sent in the requests to authenticate the user\")));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"c8410e7b-137c-5140-b42a-84e91bf795f4","slug":"2022-12-18-nginx-proxy-server","__params":{"slug":"2022-12-18-nginx-proxy-server"}}},
    "staticQueryHashes": ["3159585216"]}