{"version":3,"file":"416-870b9ce6b80a7b391384.js","mappings":"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","sources":["webpack://singsdev/./node_modules/@firebase/installations/dist/esm/index.esm2017.js","webpack://singsdev/./node_modules/@firebase/analytics/dist/esm/index.esm2017.js"],"sourcesContent":["import _toConsumableArray from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\n\nvar _ERROR_DESCRIPTION_MA;\n\nimport _regeneratorRuntime from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/regenerator/index.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { getApp, _getProvider, _registerComponent, registerVersion } from '@firebase/app';\nimport { Component } from '@firebase/component';\nimport { ErrorFactory, FirebaseError } from '@firebase/util';\nimport { openDb } from 'idb';\nvar name = \"@firebase/installations\";\nvar version = \"0.5.5\";\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar PENDING_TIMEOUT_MS = 10000;\nvar PACKAGE_VERSION = \"w:\".concat(version);\nvar INTERNAL_AUTH_VERSION = 'FIS_v2';\nvar INSTALLATIONS_API_URL = 'https://firebaseinstallations.googleapis.com/v1';\nvar TOKEN_EXPIRATION_BUFFER = 60 * 60 * 1000; // One hour\n\nvar SERVICE = 'installations';\nvar SERVICE_NAME = 'Installations';\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar ERROR_DESCRIPTION_MAP = (_ERROR_DESCRIPTION_MA = {}, _defineProperty(_ERROR_DESCRIPTION_MA, \"missing-app-config-values\"\n/* MISSING_APP_CONFIG_VALUES */\n, 'Missing App configuration value: \"{$valueName}\"'), _defineProperty(_ERROR_DESCRIPTION_MA, \"not-registered\"\n/* NOT_REGISTERED */\n, 'Firebase Installation is not registered.'), _defineProperty(_ERROR_DESCRIPTION_MA, \"installation-not-found\"\n/* INSTALLATION_NOT_FOUND */\n, 'Firebase Installation not found.'), _defineProperty(_ERROR_DESCRIPTION_MA, \"request-failed\"\n/* REQUEST_FAILED */\n, '{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"'), _defineProperty(_ERROR_DESCRIPTION_MA, \"app-offline\"\n/* APP_OFFLINE */\n, 'Could not process request. Application offline.'), _defineProperty(_ERROR_DESCRIPTION_MA, \"delete-pending-registration\"\n/* DELETE_PENDING_REGISTRATION */\n, \"Can't delete installation while there is a pending registration request.\"), _ERROR_DESCRIPTION_MA);\nvar ERROR_FACTORY = new ErrorFactory(SERVICE, SERVICE_NAME, ERROR_DESCRIPTION_MAP);\n/** Returns true if error is a FirebaseError that is based on an error from the server. */\n\nfunction isServerError(error) {\n  return error instanceof FirebaseError && error.code.includes(\"request-failed\"\n  /* REQUEST_FAILED */\n  );\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction getInstallationsEndpoint(_ref) {\n  var projectId = _ref.projectId;\n  return \"\".concat(INSTALLATIONS_API_URL, \"/projects/\").concat(projectId, \"/installations\");\n}\n\nfunction extractAuthTokenInfoFromResponse(response) {\n  return {\n    token: response.token,\n    requestStatus: 2\n    /* COMPLETED */\n    ,\n    expiresIn: getExpiresInFromResponseExpiresIn(response.expiresIn),\n    creationTime: Date.now()\n  };\n}\n\nfunction getErrorFromResponse(_x, _x2) {\n  return _getErrorFromResponse.apply(this, arguments);\n}\n\nfunction _getErrorFromResponse() {\n  _getErrorFromResponse = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(requestName, response) {\n    var responseJson, errorData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return response.json();\n\n          case 2:\n            responseJson = _context.sent;\n            errorData = responseJson.error;\n            return _context.abrupt(\"return\", ERROR_FACTORY.create(\"request-failed\"\n            /* REQUEST_FAILED */\n            , {\n              requestName: requestName,\n              serverCode: errorData.code,\n              serverMessage: errorData.message,\n              serverStatus: errorData.status\n            }));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getErrorFromResponse.apply(this, arguments);\n}\n\nfunction getHeaders(_ref2) {\n  var apiKey = _ref2.apiKey;\n  return new Headers({\n    'Content-Type': 'application/json',\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n\nfunction getHeadersWithAuth(appConfig, _ref3) {\n  var refreshToken = _ref3.refreshToken;\n  var headers = getHeaders(appConfig);\n  headers.append('Authorization', getAuthorizationHeader(refreshToken));\n  return headers;\n}\n/**\r\n * Calls the passed in fetch wrapper and returns the response.\r\n * If the returned response has a status of 5xx, re-runs the function once and\r\n * returns the response.\r\n */\n\n\nfunction retryIfServerError(_x3) {\n  return _retryIfServerError.apply(this, arguments);\n}\n\nfunction _retryIfServerError() {\n  _retryIfServerError = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fn) {\n    var result;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fn();\n\n          case 2:\n            result = _context2.sent;\n\n            if (!(result.status >= 500 && result.status < 600)) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", fn());\n\n          case 5:\n            return _context2.abrupt(\"return\", result);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _retryIfServerError.apply(this, arguments);\n}\n\nfunction getExpiresInFromResponseExpiresIn(responseExpiresIn) {\n  // This works because the server will never respond with fractions of a second.\n  return Number(responseExpiresIn.replace('s', '000'));\n}\n\nfunction getAuthorizationHeader(refreshToken) {\n  return \"\".concat(INTERNAL_AUTH_VERSION, \" \").concat(refreshToken);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction createInstallationRequest(_x4, _x5) {\n  return _createInstallationRequest.apply(this, arguments);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/** Returns a promise that resolves after given time passes. */\n\n\nfunction _createInstallationRequest() {\n  _createInstallationRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(appConfig, _ref4) {\n    var fid, endpoint, headers, body, request, response, responseValue, registeredInstallationEntry;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            fid = _ref4.fid;\n            endpoint = getInstallationsEndpoint(appConfig);\n            headers = getHeaders(appConfig);\n            body = {\n              fid: fid,\n              authVersion: INTERNAL_AUTH_VERSION,\n              appId: appConfig.appId,\n              sdkVersion: PACKAGE_VERSION\n            };\n            request = {\n              method: 'POST',\n              headers: headers,\n              body: JSON.stringify(body)\n            };\n            _context3.next = 7;\n            return retryIfServerError(function () {\n              return fetch(endpoint, request);\n            });\n\n          case 7:\n            response = _context3.sent;\n\n            if (!response.ok) {\n              _context3.next = 16;\n              break;\n            }\n\n            _context3.next = 11;\n            return response.json();\n\n          case 11:\n            responseValue = _context3.sent;\n            registeredInstallationEntry = {\n              fid: responseValue.fid || fid,\n              registrationStatus: 2\n              /* COMPLETED */\n              ,\n              refreshToken: responseValue.refreshToken,\n              authToken: extractAuthTokenInfoFromResponse(responseValue.authToken)\n            };\n            return _context3.abrupt(\"return\", registeredInstallationEntry);\n\n          case 16:\n            _context3.next = 18;\n            return getErrorFromResponse('Create Installation', response);\n\n          case 18:\n            throw _context3.sent;\n\n          case 19:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _createInstallationRequest.apply(this, arguments);\n}\n\nfunction sleep(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction bufferToBase64UrlSafe(array) {\n  var b64 = btoa(String.fromCharCode.apply(String, _toConsumableArray(array)));\n  return b64.replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar VALID_FID_PATTERN = /^[cdef][\\w-]{21}$/;\nvar INVALID_FID = '';\n/**\r\n * Generates a new FID using random values from Web Crypto API.\r\n * Returns an empty string if FID generation fails for any reason.\r\n */\n\nfunction generateFid() {\n  try {\n    // A valid FID has exactly 22 base64 characters, which is 132 bits, or 16.5\n    // bytes. our implementation generates a 17 byte array instead.\n    var fidByteArray = new Uint8Array(17);\n    var crypto = self.crypto || self.msCrypto;\n    crypto.getRandomValues(fidByteArray); // Replace the first 4 random bits with the constant FID header of 0b0111.\n\n    fidByteArray[0] = 112 + fidByteArray[0] % 16;\n    var fid = encode(fidByteArray);\n    return VALID_FID_PATTERN.test(fid) ? fid : INVALID_FID;\n  } catch (_a) {\n    // FID generation errored\n    return INVALID_FID;\n  }\n}\n/** Converts a FID Uint8Array to a base64 string representation. */\n\n\nfunction encode(fidByteArray) {\n  var b64String = bufferToBase64UrlSafe(fidByteArray); // Remove the 23rd character that was added because of the extra 4 bits at the\n  // end of our 17 byte array, and the '=' padding.\n\n  return b64String.substr(0, 22);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/** Returns a string key that can be used to identify the app. */\n\n\nfunction getKey(appConfig) {\n  return \"\".concat(appConfig.appName, \"!\").concat(appConfig.appId);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar fidChangeCallbacks = new Map();\n/**\r\n * Calls the onIdChange callbacks with the new FID value, and broadcasts the\r\n * change to other tabs.\r\n */\n\nfunction fidChanged(appConfig, fid) {\n  var key = getKey(appConfig);\n  callFidChangeCallbacks(key, fid);\n  broadcastFidChange(key, fid);\n}\n\nfunction addCallback(appConfig, callback) {\n  // Open the broadcast channel if it's not already open,\n  // to be able to listen to change events from other tabs.\n  getBroadcastChannel();\n  var key = getKey(appConfig);\n  var callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    callbackSet = new Set();\n    fidChangeCallbacks.set(key, callbackSet);\n  }\n\n  callbackSet.add(callback);\n}\n\nfunction removeCallback(appConfig, callback) {\n  var key = getKey(appConfig);\n  var callbackSet = fidChangeCallbacks.get(key);\n\n  if (!callbackSet) {\n    return;\n  }\n\n  callbackSet.delete(callback);\n\n  if (callbackSet.size === 0) {\n    fidChangeCallbacks.delete(key);\n  } // Close broadcast channel if there are no more callbacks.\n\n\n  closeBroadcastChannel();\n}\n\nfunction callFidChangeCallbacks(key, fid) {\n  var callbacks = fidChangeCallbacks.get(key);\n\n  if (!callbacks) {\n    return;\n  }\n\n  var _iterator = _createForOfIteratorHelper(callbacks),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var callback = _step.value;\n      callback(fid);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction broadcastFidChange(key, fid) {\n  var channel = getBroadcastChannel();\n\n  if (channel) {\n    channel.postMessage({\n      key: key,\n      fid: fid\n    });\n  }\n\n  closeBroadcastChannel();\n}\n\nvar broadcastChannel = null;\n/** Opens and returns a BroadcastChannel if it is supported by the browser. */\n\nfunction getBroadcastChannel() {\n  if (!broadcastChannel && 'BroadcastChannel' in self) {\n    broadcastChannel = new BroadcastChannel('[Firebase] FID Change');\n\n    broadcastChannel.onmessage = function (e) {\n      callFidChangeCallbacks(e.data.key, e.data.fid);\n    };\n  }\n\n  return broadcastChannel;\n}\n\nfunction closeBroadcastChannel() {\n  if (fidChangeCallbacks.size === 0 && broadcastChannel) {\n    broadcastChannel.close();\n    broadcastChannel = null;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar DATABASE_NAME = 'firebase-installations-database';\nvar DATABASE_VERSION = 1;\nvar OBJECT_STORE_NAME = 'firebase-installations-store';\nvar dbPromise = null;\n\nfunction getDbPromise() {\n  if (!dbPromise) {\n    dbPromise = openDb(DATABASE_NAME, DATABASE_VERSION, function (upgradeDB) {\n      // We don't use 'break' in this switch statement, the fall-through\n      // behavior is what we want, because if there are multiple versions between\n      // the old version and the current version, we want ALL the migrations\n      // that correspond to those versions to run, not only the last one.\n      // eslint-disable-next-line default-case\n      switch (upgradeDB.oldVersion) {\n        case 0:\n          upgradeDB.createObjectStore(OBJECT_STORE_NAME);\n      }\n    });\n  }\n\n  return dbPromise;\n}\n/** Assigns or overwrites the record for the given key with the given value. */\n\n\nfunction set(_x6, _x7) {\n  return _set.apply(this, arguments);\n}\n/** Removes record(s) from the objectStore that match the given key. */\n\n\nfunction _set() {\n  _set = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(appConfig, value) {\n    var key, db, tx, objectStore, oldValue;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            key = getKey(appConfig);\n            _context4.next = 3;\n            return getDbPromise();\n\n          case 3:\n            db = _context4.sent;\n            tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n            objectStore = tx.objectStore(OBJECT_STORE_NAME);\n            _context4.next = 8;\n            return objectStore.get(key);\n\n          case 8:\n            oldValue = _context4.sent;\n            _context4.next = 11;\n            return objectStore.put(value, key);\n\n          case 11:\n            _context4.next = 13;\n            return tx.complete;\n\n          case 13:\n            if (!oldValue || oldValue.fid !== value.fid) {\n              fidChanged(appConfig, value.fid);\n            }\n\n            return _context4.abrupt(\"return\", value);\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _set.apply(this, arguments);\n}\n\nfunction remove(_x8) {\n  return _remove.apply(this, arguments);\n}\n/**\r\n * Atomically updates a record with the result of updateFn, which gets\r\n * called with the current value. If newValue is undefined, the record is\r\n * deleted instead.\r\n * @return Updated value\r\n */\n\n\nfunction _remove() {\n  _remove = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(appConfig) {\n    var key, db, tx;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            key = getKey(appConfig);\n            _context5.next = 3;\n            return getDbPromise();\n\n          case 3:\n            db = _context5.sent;\n            tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n            _context5.next = 7;\n            return tx.objectStore(OBJECT_STORE_NAME).delete(key);\n\n          case 7:\n            _context5.next = 9;\n            return tx.complete;\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _remove.apply(this, arguments);\n}\n\nfunction update(_x9, _x10) {\n  return _update.apply(this, arguments);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Updates and returns the InstallationEntry from the database.\r\n * Also triggers a registration request if it is necessary and possible.\r\n */\n\n\nfunction _update() {\n  _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(appConfig, updateFn) {\n    var key, db, tx, store, oldValue, newValue;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            key = getKey(appConfig);\n            _context6.next = 3;\n            return getDbPromise();\n\n          case 3:\n            db = _context6.sent;\n            tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\n            store = tx.objectStore(OBJECT_STORE_NAME);\n            _context6.next = 8;\n            return store.get(key);\n\n          case 8:\n            oldValue = _context6.sent;\n            newValue = updateFn(oldValue);\n\n            if (!(newValue === undefined)) {\n              _context6.next = 15;\n              break;\n            }\n\n            _context6.next = 13;\n            return store.delete(key);\n\n          case 13:\n            _context6.next = 17;\n            break;\n\n          case 15:\n            _context6.next = 17;\n            return store.put(newValue, key);\n\n          case 17:\n            _context6.next = 19;\n            return tx.complete;\n\n          case 19:\n            if (newValue && (!oldValue || oldValue.fid !== newValue.fid)) {\n              fidChanged(appConfig, newValue.fid);\n            }\n\n            return _context6.abrupt(\"return\", newValue);\n\n          case 21:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _update.apply(this, arguments);\n}\n\nfunction getInstallationEntry(_x11) {\n  return _getInstallationEntry.apply(this, arguments);\n}\n/**\r\n * Creates a new Installation Entry if one does not exist.\r\n * Also clears timed out pending requests.\r\n */\n\n\nfunction _getInstallationEntry() {\n  _getInstallationEntry = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(appConfig) {\n    var registrationPromise, installationEntry;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return update(appConfig, function (oldEntry) {\n              var installationEntry = updateOrCreateInstallationEntry(oldEntry);\n              var entryWithPromise = triggerRegistrationIfNecessary(appConfig, installationEntry);\n              registrationPromise = entryWithPromise.registrationPromise;\n              return entryWithPromise.installationEntry;\n            });\n\n          case 2:\n            installationEntry = _context7.sent;\n\n            if (!(installationEntry.fid === INVALID_FID)) {\n              _context7.next = 8;\n              break;\n            }\n\n            _context7.next = 6;\n            return registrationPromise;\n\n          case 6:\n            _context7.t0 = _context7.sent;\n            return _context7.abrupt(\"return\", {\n              installationEntry: _context7.t0\n            });\n\n          case 8:\n            return _context7.abrupt(\"return\", {\n              installationEntry: installationEntry,\n              registrationPromise: registrationPromise\n            });\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _getInstallationEntry.apply(this, arguments);\n}\n\nfunction updateOrCreateInstallationEntry(oldEntry) {\n  var entry = oldEntry || {\n    fid: generateFid(),\n    registrationStatus: 0\n    /* NOT_STARTED */\n\n  };\n  return clearTimedOutRequest(entry);\n}\n/**\r\n * If the Firebase Installation is not registered yet, this will trigger the\r\n * registration and return an InProgressInstallationEntry.\r\n *\r\n * If registrationPromise does not exist, the installationEntry is guaranteed\r\n * to be registered.\r\n */\n\n\nfunction triggerRegistrationIfNecessary(appConfig, installationEntry) {\n  if (installationEntry.registrationStatus === 0\n  /* NOT_STARTED */\n  ) {\n    if (!navigator.onLine) {\n      // Registration required but app is offline.\n      var registrationPromiseWithError = Promise.reject(ERROR_FACTORY.create(\"app-offline\"\n      /* APP_OFFLINE */\n      ));\n      return {\n        installationEntry: installationEntry,\n        registrationPromise: registrationPromiseWithError\n      };\n    } // Try registering. Change status to IN_PROGRESS.\n\n\n    var inProgressEntry = {\n      fid: installationEntry.fid,\n      registrationStatus: 1\n      /* IN_PROGRESS */\n      ,\n      registrationTime: Date.now()\n    };\n    var registrationPromise = registerInstallation(appConfig, inProgressEntry);\n    return {\n      installationEntry: inProgressEntry,\n      registrationPromise: registrationPromise\n    };\n  } else if (installationEntry.registrationStatus === 1\n  /* IN_PROGRESS */\n  ) {\n    return {\n      installationEntry: installationEntry,\n      registrationPromise: waitUntilFidRegistration(appConfig)\n    };\n  } else {\n    return {\n      installationEntry: installationEntry\n    };\n  }\n}\n/** This will be executed only once for each new Firebase Installation. */\n\n\nfunction registerInstallation(_x12, _x13) {\n  return _registerInstallation.apply(this, arguments);\n}\n/** Call if FID registration is pending in another request. */\n\n\nfunction _registerInstallation() {\n  _registerInstallation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(appConfig, installationEntry) {\n    var registeredInstallationEntry;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.prev = 0;\n            _context8.next = 3;\n            return createInstallationRequest(appConfig, installationEntry);\n\n          case 3:\n            registeredInstallationEntry = _context8.sent;\n            return _context8.abrupt(\"return\", set(appConfig, registeredInstallationEntry));\n\n          case 7:\n            _context8.prev = 7;\n            _context8.t0 = _context8[\"catch\"](0);\n\n            if (!(isServerError(_context8.t0) && _context8.t0.customData.serverCode === 409)) {\n              _context8.next = 14;\n              break;\n            }\n\n            _context8.next = 12;\n            return remove(appConfig);\n\n          case 12:\n            _context8.next = 16;\n            break;\n\n          case 14:\n            _context8.next = 16;\n            return set(appConfig, {\n              fid: installationEntry.fid,\n              registrationStatus: 0\n              /* NOT_STARTED */\n\n            });\n\n          case 16:\n            throw _context8.t0;\n\n          case 17:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[0, 7]]);\n  }));\n  return _registerInstallation.apply(this, arguments);\n}\n\nfunction waitUntilFidRegistration(_x14) {\n  return _waitUntilFidRegistration.apply(this, arguments);\n}\n/**\r\n * Called only if there is a CreateInstallation request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * CreateInstallation request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\n\n\nfunction _waitUntilFidRegistration() {\n  _waitUntilFidRegistration = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(appConfig) {\n    var entry, _yield$getInstallatio, installationEntry, registrationPromise;\n\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return updateInstallationRequest(appConfig);\n\n          case 2:\n            entry = _context9.sent;\n\n          case 3:\n            if (!(entry.registrationStatus === 1\n            /* IN_PROGRESS */\n            )) {\n              _context9.next = 11;\n              break;\n            }\n\n            _context9.next = 6;\n            return sleep(100);\n\n          case 6:\n            _context9.next = 8;\n            return updateInstallationRequest(appConfig);\n\n          case 8:\n            entry = _context9.sent;\n            _context9.next = 3;\n            break;\n\n          case 11:\n            if (!(entry.registrationStatus === 0\n            /* NOT_STARTED */\n            )) {\n              _context9.next = 22;\n              break;\n            }\n\n            _context9.next = 14;\n            return getInstallationEntry(appConfig);\n\n          case 14:\n            _yield$getInstallatio = _context9.sent;\n            installationEntry = _yield$getInstallatio.installationEntry;\n            registrationPromise = _yield$getInstallatio.registrationPromise;\n\n            if (!registrationPromise) {\n              _context9.next = 21;\n              break;\n            }\n\n            return _context9.abrupt(\"return\", registrationPromise);\n\n          case 21:\n            return _context9.abrupt(\"return\", installationEntry);\n\n          case 22:\n            return _context9.abrupt(\"return\", entry);\n\n          case 23:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _waitUntilFidRegistration.apply(this, arguments);\n}\n\nfunction updateInstallationRequest(appConfig) {\n  return update(appConfig, function (oldEntry) {\n    if (!oldEntry) {\n      throw ERROR_FACTORY.create(\"installation-not-found\"\n      /* INSTALLATION_NOT_FOUND */\n      );\n    }\n\n    return clearTimedOutRequest(oldEntry);\n  });\n}\n\nfunction clearTimedOutRequest(entry) {\n  if (hasInstallationRequestTimedOut(entry)) {\n    return {\n      fid: entry.fid,\n      registrationStatus: 0\n      /* NOT_STARTED */\n\n    };\n  }\n\n  return entry;\n}\n\nfunction hasInstallationRequestTimedOut(installationEntry) {\n  return installationEntry.registrationStatus === 1\n  /* IN_PROGRESS */\n  && installationEntry.registrationTime + PENDING_TIMEOUT_MS < Date.now();\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction generateAuthTokenRequest(_x15, _x16) {\n  return _generateAuthTokenRequest.apply(this, arguments);\n}\n\nfunction _generateAuthTokenRequest() {\n  _generateAuthTokenRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(_ref5, installationEntry) {\n    var appConfig, platformLoggerProvider, endpoint, headers, platformLogger, body, request, response, responseValue, completedAuthToken;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            appConfig = _ref5.appConfig, platformLoggerProvider = _ref5.platformLoggerProvider;\n            endpoint = getGenerateAuthTokenEndpoint(appConfig, installationEntry);\n            headers = getHeadersWithAuth(appConfig, installationEntry); // If platform logger exists, add the platform info string to the header.\n\n            platformLogger = platformLoggerProvider.getImmediate({\n              optional: true\n            });\n\n            if (platformLogger) {\n              headers.append('x-firebase-client', platformLogger.getPlatformInfoString());\n            }\n\n            body = {\n              installation: {\n                sdkVersion: PACKAGE_VERSION\n              }\n            };\n            request = {\n              method: 'POST',\n              headers: headers,\n              body: JSON.stringify(body)\n            };\n            _context10.next = 9;\n            return retryIfServerError(function () {\n              return fetch(endpoint, request);\n            });\n\n          case 9:\n            response = _context10.sent;\n\n            if (!response.ok) {\n              _context10.next = 18;\n              break;\n            }\n\n            _context10.next = 13;\n            return response.json();\n\n          case 13:\n            responseValue = _context10.sent;\n            completedAuthToken = extractAuthTokenInfoFromResponse(responseValue);\n            return _context10.abrupt(\"return\", completedAuthToken);\n\n          case 18:\n            _context10.next = 20;\n            return getErrorFromResponse('Generate Auth Token', response);\n\n          case 20:\n            throw _context10.sent;\n\n          case 21:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n  return _generateAuthTokenRequest.apply(this, arguments);\n}\n\nfunction getGenerateAuthTokenEndpoint(appConfig, _ref6) {\n  var fid = _ref6.fid;\n  return \"\".concat(getInstallationsEndpoint(appConfig), \"/\").concat(fid, \"/authTokens:generate\");\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns a valid authentication token for the installation. Generates a new\r\n * token if one doesn't exist, is expired or about to expire.\r\n *\r\n * Should only be called if the Firebase Installation is registered.\r\n */\n\n\nfunction refreshAuthToken(_x17) {\n  return _refreshAuthToken.apply(this, arguments);\n}\n/**\r\n * Call only if FID is registered and Auth Token request is in progress.\r\n *\r\n * Waits until the current pending request finishes. If the request times out,\r\n * tries once in this thread as well.\r\n */\n\n\nfunction _refreshAuthToken() {\n  _refreshAuthToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(installations) {\n    var forceRefresh,\n        tokenPromise,\n        entry,\n        authToken,\n        _args11 = arguments;\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            forceRefresh = _args11.length > 1 && _args11[1] !== undefined ? _args11[1] : false;\n            _context11.next = 3;\n            return update(installations.appConfig, function (oldEntry) {\n              if (!isEntryRegistered(oldEntry)) {\n                throw ERROR_FACTORY.create(\"not-registered\"\n                /* NOT_REGISTERED */\n                );\n              }\n\n              var oldAuthToken = oldEntry.authToken;\n\n              if (!forceRefresh && isAuthTokenValid(oldAuthToken)) {\n                // There is a valid token in the DB.\n                return oldEntry;\n              } else if (oldAuthToken.requestStatus === 1\n              /* IN_PROGRESS */\n              ) {\n                // There already is a token request in progress.\n                tokenPromise = waitUntilAuthTokenRequest(installations, forceRefresh);\n                return oldEntry;\n              } else {\n                // No token or token expired.\n                if (!navigator.onLine) {\n                  throw ERROR_FACTORY.create(\"app-offline\"\n                  /* APP_OFFLINE */\n                  );\n                }\n\n                var inProgressEntry = makeAuthTokenRequestInProgressEntry(oldEntry);\n                tokenPromise = fetchAuthTokenFromServer(installations, inProgressEntry);\n                return inProgressEntry;\n              }\n            });\n\n          case 3:\n            entry = _context11.sent;\n\n            if (!tokenPromise) {\n              _context11.next = 10;\n              break;\n            }\n\n            _context11.next = 7;\n            return tokenPromise;\n\n          case 7:\n            _context11.t0 = _context11.sent;\n            _context11.next = 11;\n            break;\n\n          case 10:\n            _context11.t0 = entry.authToken;\n\n          case 11:\n            authToken = _context11.t0;\n            return _context11.abrupt(\"return\", authToken);\n\n          case 13:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n  return _refreshAuthToken.apply(this, arguments);\n}\n\nfunction waitUntilAuthTokenRequest(_x18, _x19) {\n  return _waitUntilAuthTokenRequest.apply(this, arguments);\n}\n/**\r\n * Called only if there is a GenerateAuthToken request in progress.\r\n *\r\n * Updates the InstallationEntry in the DB based on the status of the\r\n * GenerateAuthToken request.\r\n *\r\n * Returns the updated InstallationEntry.\r\n */\n\n\nfunction _waitUntilAuthTokenRequest() {\n  _waitUntilAuthTokenRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(installations, forceRefresh) {\n    var entry, authToken;\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.next = 2;\n            return updateAuthTokenRequest(installations.appConfig);\n\n          case 2:\n            entry = _context12.sent;\n\n          case 3:\n            if (!(entry.authToken.requestStatus === 1\n            /* IN_PROGRESS */\n            )) {\n              _context12.next = 11;\n              break;\n            }\n\n            _context12.next = 6;\n            return sleep(100);\n\n          case 6:\n            _context12.next = 8;\n            return updateAuthTokenRequest(installations.appConfig);\n\n          case 8:\n            entry = _context12.sent;\n            _context12.next = 3;\n            break;\n\n          case 11:\n            authToken = entry.authToken;\n\n            if (!(authToken.requestStatus === 0\n            /* NOT_STARTED */\n            )) {\n              _context12.next = 16;\n              break;\n            }\n\n            return _context12.abrupt(\"return\", refreshAuthToken(installations, forceRefresh));\n\n          case 16:\n            return _context12.abrupt(\"return\", authToken);\n\n          case 17:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n  return _waitUntilAuthTokenRequest.apply(this, arguments);\n}\n\nfunction updateAuthTokenRequest(appConfig) {\n  return update(appConfig, function (oldEntry) {\n    if (!isEntryRegistered(oldEntry)) {\n      throw ERROR_FACTORY.create(\"not-registered\"\n      /* NOT_REGISTERED */\n      );\n    }\n\n    var oldAuthToken = oldEntry.authToken;\n\n    if (hasAuthTokenRequestTimedOut(oldAuthToken)) {\n      return Object.assign(Object.assign({}, oldEntry), {\n        authToken: {\n          requestStatus: 0\n          /* NOT_STARTED */\n\n        }\n      });\n    }\n\n    return oldEntry;\n  });\n}\n\nfunction fetchAuthTokenFromServer(_x20, _x21) {\n  return _fetchAuthTokenFromServer.apply(this, arguments);\n}\n\nfunction _fetchAuthTokenFromServer() {\n  _fetchAuthTokenFromServer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(installations, installationEntry) {\n    var authToken, updatedInstallationEntry, _updatedInstallationEntry;\n\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.prev = 0;\n            _context13.next = 3;\n            return generateAuthTokenRequest(installations, installationEntry);\n\n          case 3:\n            authToken = _context13.sent;\n            updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), {\n              authToken: authToken\n            });\n            _context13.next = 7;\n            return set(installations.appConfig, updatedInstallationEntry);\n\n          case 7:\n            return _context13.abrupt(\"return\", authToken);\n\n          case 10:\n            _context13.prev = 10;\n            _context13.t0 = _context13[\"catch\"](0);\n\n            if (!(isServerError(_context13.t0) && (_context13.t0.customData.serverCode === 401 || _context13.t0.customData.serverCode === 404))) {\n              _context13.next = 17;\n              break;\n            }\n\n            _context13.next = 15;\n            return remove(installations.appConfig);\n\n          case 15:\n            _context13.next = 20;\n            break;\n\n          case 17:\n            _updatedInstallationEntry = Object.assign(Object.assign({}, installationEntry), {\n              authToken: {\n                requestStatus: 0\n                /* NOT_STARTED */\n\n              }\n            });\n            _context13.next = 20;\n            return set(installations.appConfig, _updatedInstallationEntry);\n\n          case 20:\n            throw _context13.t0;\n\n          case 21:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13, null, [[0, 10]]);\n  }));\n  return _fetchAuthTokenFromServer.apply(this, arguments);\n}\n\nfunction isEntryRegistered(installationEntry) {\n  return installationEntry !== undefined && installationEntry.registrationStatus === 2\n  /* COMPLETED */\n  ;\n}\n\nfunction isAuthTokenValid(authToken) {\n  return authToken.requestStatus === 2\n  /* COMPLETED */\n  && !isAuthTokenExpired(authToken);\n}\n\nfunction isAuthTokenExpired(authToken) {\n  var now = Date.now();\n  return now < authToken.creationTime || authToken.creationTime + authToken.expiresIn < now + TOKEN_EXPIRATION_BUFFER;\n}\n/** Returns an updated InstallationEntry with an InProgressAuthToken. */\n\n\nfunction makeAuthTokenRequestInProgressEntry(oldEntry) {\n  var inProgressAuthToken = {\n    requestStatus: 1\n    /* IN_PROGRESS */\n    ,\n    requestTime: Date.now()\n  };\n  return Object.assign(Object.assign({}, oldEntry), {\n    authToken: inProgressAuthToken\n  });\n}\n\nfunction hasAuthTokenRequestTimedOut(authToken) {\n  return authToken.requestStatus === 1\n  /* IN_PROGRESS */\n  && authToken.requestTime + PENDING_TIMEOUT_MS < Date.now();\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Creates a Firebase Installation if there isn't one for the app and\r\n * returns the Installation ID.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\n\n\nfunction _getId2(_x22) {\n  return _getId.apply(this, arguments);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns a Firebase Installations auth token, identifying the current\r\n * Firebase Installation.\r\n * @param installations - The `Installations` instance.\r\n * @param forceRefresh - Force refresh regardless of token expiration.\r\n *\r\n * @public\r\n */\n\n\nfunction _getId() {\n  _getId = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(installations) {\n    var installationsImpl, _yield$getInstallatio2, installationEntry, registrationPromise;\n\n    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            installationsImpl = installations;\n            _context14.next = 3;\n            return getInstallationEntry(installationsImpl.appConfig);\n\n          case 3:\n            _yield$getInstallatio2 = _context14.sent;\n            installationEntry = _yield$getInstallatio2.installationEntry;\n            registrationPromise = _yield$getInstallatio2.registrationPromise;\n\n            if (registrationPromise) {\n              registrationPromise.catch(console.error);\n            } else {\n              // If the installation is already registered, update the authentication\n              // token if needed.\n              refreshAuthToken(installationsImpl).catch(console.error);\n            }\n\n            return _context14.abrupt(\"return\", installationEntry.fid);\n\n          case 8:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14);\n  }));\n  return _getId.apply(this, arguments);\n}\n\nfunction _getToken2(_x23) {\n  return _getToken.apply(this, arguments);\n}\n\nfunction _getToken() {\n  _getToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(installations) {\n    var forceRefresh,\n        installationsImpl,\n        authToken,\n        _args15 = arguments;\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            forceRefresh = _args15.length > 1 && _args15[1] !== undefined ? _args15[1] : false;\n            installationsImpl = installations;\n            _context15.next = 4;\n            return completeInstallationRegistration(installationsImpl.appConfig);\n\n          case 4:\n            _context15.next = 6;\n            return refreshAuthToken(installationsImpl, forceRefresh);\n\n          case 6:\n            authToken = _context15.sent;\n            return _context15.abrupt(\"return\", authToken.token);\n\n          case 8:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15);\n  }));\n  return _getToken.apply(this, arguments);\n}\n\nfunction completeInstallationRegistration(_x24) {\n  return _completeInstallationRegistration.apply(this, arguments);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _completeInstallationRegistration() {\n  _completeInstallationRegistration = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16(appConfig) {\n    var _yield$getInstallatio3, registrationPromise;\n\n    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            _context16.next = 2;\n            return getInstallationEntry(appConfig);\n\n          case 2:\n            _yield$getInstallatio3 = _context16.sent;\n            registrationPromise = _yield$getInstallatio3.registrationPromise;\n\n            if (!registrationPromise) {\n              _context16.next = 7;\n              break;\n            }\n\n            _context16.next = 7;\n            return registrationPromise;\n\n          case 7:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16);\n  }));\n  return _completeInstallationRegistration.apply(this, arguments);\n}\n\nfunction deleteInstallationRequest(_x25, _x26) {\n  return _deleteInstallationRequest.apply(this, arguments);\n}\n\nfunction _deleteInstallationRequest() {\n  _deleteInstallationRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(appConfig, installationEntry) {\n    var endpoint, headers, request, response;\n    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            endpoint = getDeleteEndpoint(appConfig, installationEntry);\n            headers = getHeadersWithAuth(appConfig, installationEntry);\n            request = {\n              method: 'DELETE',\n              headers: headers\n            };\n            _context17.next = 5;\n            return retryIfServerError(function () {\n              return fetch(endpoint, request);\n            });\n\n          case 5:\n            response = _context17.sent;\n\n            if (response.ok) {\n              _context17.next = 10;\n              break;\n            }\n\n            _context17.next = 9;\n            return getErrorFromResponse('Delete Installation', response);\n\n          case 9:\n            throw _context17.sent;\n\n          case 10:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17);\n  }));\n  return _deleteInstallationRequest.apply(this, arguments);\n}\n\nfunction getDeleteEndpoint(appConfig, _ref7) {\n  var fid = _ref7.fid;\n  return \"\".concat(getInstallationsEndpoint(appConfig), \"/\").concat(fid);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Deletes the Firebase Installation and all associated data.\r\n * @param installations - The `Installations` instance.\r\n *\r\n * @public\r\n */\n\n\nfunction deleteInstallations(_x27) {\n  return _deleteInstallations.apply(this, arguments);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Sets a new callback that will get called when Installation ID changes.\r\n * Returns an unsubscribe function that will remove the callback when called.\r\n * @param installations - The `Installations` instance.\r\n * @param callback - The callback function that is invoked when FID changes.\r\n * @returns A function that can be called to unsubscribe.\r\n *\r\n * @public\r\n */\n\n\nfunction _deleteInstallations() {\n  _deleteInstallations = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(installations) {\n    var appConfig, entry;\n    return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            appConfig = installations.appConfig;\n            _context18.next = 3;\n            return update(appConfig, function (oldEntry) {\n              if (oldEntry && oldEntry.registrationStatus === 0\n              /* NOT_STARTED */\n              ) {\n                // Delete the unregistered entry without sending a deleteInstallation request.\n                return undefined;\n              }\n\n              return oldEntry;\n            });\n\n          case 3:\n            entry = _context18.sent;\n\n            if (!entry) {\n              _context18.next = 18;\n              break;\n            }\n\n            if (!(entry.registrationStatus === 1\n            /* IN_PROGRESS */\n            )) {\n              _context18.next = 9;\n              break;\n            }\n\n            throw ERROR_FACTORY.create(\"delete-pending-registration\"\n            /* DELETE_PENDING_REGISTRATION */\n            );\n\n          case 9:\n            if (!(entry.registrationStatus === 2\n            /* COMPLETED */\n            )) {\n              _context18.next = 18;\n              break;\n            }\n\n            if (navigator.onLine) {\n              _context18.next = 14;\n              break;\n            }\n\n            throw ERROR_FACTORY.create(\"app-offline\"\n            /* APP_OFFLINE */\n            );\n\n          case 14:\n            _context18.next = 16;\n            return deleteInstallationRequest(appConfig, entry);\n\n          case 16:\n            _context18.next = 18;\n            return remove(appConfig);\n\n          case 18:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, _callee18);\n  }));\n  return _deleteInstallations.apply(this, arguments);\n}\n\nfunction onIdChange(installations, callback) {\n  var appConfig = installations.appConfig;\n  addCallback(appConfig, callback);\n  return function () {\n    removeCallback(appConfig, callback);\n  };\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns an instance of {@link Installations} associated with the given\r\n * {@link @firebase/app#FirebaseApp} instance.\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * @public\r\n */\n\n\nfunction getInstallations() {\n  var app = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getApp();\n\n  var installationsImpl = _getProvider(app, 'installations').getImmediate();\n\n  return installationsImpl;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction extractAppConfig(app) {\n  if (!app || !app.options) {\n    throw getMissingValueError('App Configuration');\n  }\n\n  if (!app.name) {\n    throw getMissingValueError('App Name');\n  } // Required app config keys\n\n\n  var configKeys = ['projectId', 'apiKey', 'appId'];\n\n  for (var _i = 0, _configKeys = configKeys; _i < _configKeys.length; _i++) {\n    var keyName = _configKeys[_i];\n\n    if (!app.options[keyName]) {\n      throw getMissingValueError(keyName);\n    }\n  }\n\n  return {\n    appName: app.name,\n    projectId: app.options.projectId,\n    apiKey: app.options.apiKey,\n    appId: app.options.appId\n  };\n}\n\nfunction getMissingValueError(valueName) {\n  return ERROR_FACTORY.create(\"missing-app-config-values\"\n  /* MISSING_APP_CONFIG_VALUES */\n  , {\n    valueName: valueName\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar INSTALLATIONS_NAME = 'installations';\nvar INSTALLATIONS_NAME_INTERNAL = 'installations-internal';\n\nvar publicFactory = function publicFactory(container) {\n  var app = container.getProvider('app').getImmediate(); // Throws if app isn't configured properly.\n\n  var appConfig = extractAppConfig(app);\n\n  var platformLoggerProvider = _getProvider(app, 'platform-logger');\n\n  var installationsImpl = {\n    app: app,\n    appConfig: appConfig,\n    platformLoggerProvider: platformLoggerProvider,\n    _delete: function _delete() {\n      return Promise.resolve();\n    }\n  };\n  return installationsImpl;\n};\n\nvar internalFactory = function internalFactory(container) {\n  var app = container.getProvider('app').getImmediate(); // Internal FIS instance relies on public FIS instance.\n\n  var installations = _getProvider(app, INSTALLATIONS_NAME).getImmediate();\n\n  var installationsInternal = {\n    getId: function getId() {\n      return _getId2(installations);\n    },\n    getToken: function getToken(forceRefresh) {\n      return _getToken2(installations, forceRefresh);\n    }\n  };\n  return installationsInternal;\n};\n\nfunction registerInstallations() {\n  _registerComponent(new Component(INSTALLATIONS_NAME, publicFactory, \"PUBLIC\"\n  /* PUBLIC */\n  ));\n\n  _registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL, internalFactory, \"PRIVATE\"\n  /* PRIVATE */\n  ));\n}\n/**\r\n * Firebase Installations\r\n *\r\n * @packageDocumentation\r\n */\n\n\nregisterInstallations();\nregisterVersion(name, version); // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n\nregisterVersion(name, version, 'esm2017');\nexport { deleteInstallations, _getId2 as getId, getInstallations, _getToken2 as getToken, onIdChange };","import _slicedToArray from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _asyncToGenerator from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _ERRORS;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport _regeneratorRuntime from \"/Users/singwork/sing-projects/singmak.github.io/node_modules/@babel/runtime/regenerator/index.js\";\nimport { getApp, _getProvider, _registerComponent, registerVersion } from '@firebase/app';\nimport { Logger } from '@firebase/logger';\nimport { ErrorFactory, calculateBackoffMillis, FirebaseError, isIndexedDBAvailable, validateIndexedDBOpenable, isBrowserExtension, areCookiesEnabled, getModularInstance, deepEqual } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport '@firebase/installations';\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Type constant for Firebase Analytics.\r\n */\n\nvar ANALYTICS_TYPE = 'analytics'; // Key to attach FID to in gtag params.\n\nvar GA_FID_KEY = 'firebase_id';\nvar ORIGIN_KEY = 'origin';\nvar FETCH_TIMEOUT_MILLIS = 60 * 1000;\nvar DYNAMIC_CONFIG_URL = 'https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig';\nvar GTAG_URL = 'https://www.googletagmanager.com/gtag/js';\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nvar logger = new Logger('@firebase/analytics');\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Makeshift polyfill for Promise.allSettled(). Resolves when all promises\r\n * have either resolved or rejected.\r\n *\r\n * @param promises Array of promises to wait for.\r\n */\n\nfunction promiseAllSettled(promises) {\n  return Promise.all(promises.map(function (promise) {\n    return promise.catch(function (e) {\n      return e;\n    });\n  }));\n}\n/**\r\n * Inserts gtag script tag into the page to asynchronously download gtag.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\r\n */\n\n\nfunction insertScriptTag(dataLayerName, measurementId) {\n  var script = document.createElement('script'); // We are not providing an analyticsId in the URL because it would trigger a `page_view`\n  // without fid. We will initialize ga-id using gtag (config) command together with fid.\n\n  script.src = \"\".concat(GTAG_URL, \"?l=\").concat(dataLayerName, \"&id=\").concat(measurementId);\n  script.async = true;\n  document.head.appendChild(script);\n}\n/**\r\n * Get reference to, or create, global datalayer.\r\n * @param dataLayerName Name of datalayer (most often the default, \"_dataLayer\").\r\n */\n\n\nfunction getOrCreateDataLayer(dataLayerName) {\n  // Check for existing dataLayer and create if needed.\n  var dataLayer = [];\n\n  if (Array.isArray(window[dataLayerName])) {\n    dataLayer = window[dataLayerName];\n  } else {\n    window[dataLayerName] = dataLayer;\n  }\n\n  return dataLayer;\n}\n/**\r\n * Wrapped gtag logic when gtag is called with 'config' command.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n * @param measurementId GA Measurement ID to set config for.\r\n * @param gtagParams Gtag config params to set.\r\n */\n\n\nfunction gtagOnConfig(_x, _x2, _x3, _x4, _x5, _x6) {\n  return _gtagOnConfig.apply(this, arguments);\n}\n/**\r\n * Wrapped gtag logic when gtag is called with 'event' command.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementId GA Measurement ID to log event to.\r\n * @param gtagParams Params to log with this event.\r\n */\n\n\nfunction _gtagOnConfig() {\n  _gtagOnConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, measurementId, gtagParams) {\n    var correspondingAppId, dynamicConfigResults, foundConfig;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            // If config is already fetched, we know the appId and can use it to look up what FID promise we\n            /// are waiting for, and wait only on that one.\n            correspondingAppId = measurementIdToAppId[measurementId];\n            _context2.prev = 1;\n\n            if (!correspondingAppId) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 5;\n            return initializationPromisesMap[correspondingAppId];\n\n          case 5:\n            _context2.next = 14;\n            break;\n\n          case 7:\n            _context2.next = 9;\n            return promiseAllSettled(dynamicConfigPromisesList);\n\n          case 9:\n            dynamicConfigResults = _context2.sent;\n            foundConfig = dynamicConfigResults.find(function (config) {\n              return config.measurementId === measurementId;\n            });\n\n            if (!foundConfig) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 14;\n            return initializationPromisesMap[foundConfig.appId];\n\n          case 14:\n            _context2.next = 19;\n            break;\n\n          case 16:\n            _context2.prev = 16;\n            _context2.t0 = _context2[\"catch\"](1);\n            logger.error(_context2.t0);\n\n          case 19:\n            gtagCore(\"config\"\n            /* CONFIG */\n            , measurementId, gtagParams);\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[1, 16]]);\n  }));\n  return _gtagOnConfig.apply(this, arguments);\n}\n\nfunction gtagOnEvent(_x7, _x8, _x9, _x10, _x11) {\n  return _gtagOnEvent.apply(this, arguments);\n}\n/**\r\n * Wraps a standard gtag function with extra code to wait for completion of\r\n * relevant initialization promises before sending requests.\r\n *\r\n * @param gtagCore Basic gtag function that just appends to dataLayer.\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n */\n\n\nfunction _gtagOnEvent() {\n  _gtagOnEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementId, gtagParams) {\n    var initializationPromisesToWaitFor, gaSendToList, dynamicConfigResults, _iterator, _step, _loop, _ret;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            initializationPromisesToWaitFor = []; // If there's a 'send_to' param, check if any ID specified matches\n            // an initializeIds() promise we are waiting for.\n\n            if (!(gtagParams && gtagParams['send_to'])) {\n              _context3.next = 26;\n              break;\n            }\n\n            gaSendToList = gtagParams['send_to']; // Make it an array if is isn't, so it can be dealt with the same way.\n\n            if (!Array.isArray(gaSendToList)) {\n              gaSendToList = [gaSendToList];\n            } // Checking 'send_to' fields requires having all measurement ID results back from\n            // the dynamic config fetch.\n\n\n            _context3.next = 7;\n            return promiseAllSettled(dynamicConfigPromisesList);\n\n          case 7:\n            dynamicConfigResults = _context3.sent;\n            _iterator = _createForOfIteratorHelper(gaSendToList);\n            _context3.prev = 9;\n\n            _loop = function _loop() {\n              var sendToId = _step.value;\n              // Any fetched dynamic measurement ID that matches this 'send_to' ID\n              var foundConfig = dynamicConfigResults.find(function (config) {\n                return config.measurementId === sendToId;\n              });\n              var initializationPromise = foundConfig && initializationPromisesMap[foundConfig.appId];\n\n              if (initializationPromise) {\n                initializationPromisesToWaitFor.push(initializationPromise);\n              } else {\n                // Found an item in 'send_to' that is not associated\n                // directly with an FID, possibly a group.  Empty this array,\n                // exit the loop early, and let it get populated below.\n                initializationPromisesToWaitFor = [];\n                return \"break\";\n              }\n            };\n\n            _iterator.s();\n\n          case 12:\n            if ((_step = _iterator.n()).done) {\n              _context3.next = 18;\n              break;\n            }\n\n            _ret = _loop();\n\n            if (!(_ret === \"break\")) {\n              _context3.next = 16;\n              break;\n            }\n\n            return _context3.abrupt(\"break\", 18);\n\n          case 16:\n            _context3.next = 12;\n            break;\n\n          case 18:\n            _context3.next = 23;\n            break;\n\n          case 20:\n            _context3.prev = 20;\n            _context3.t0 = _context3[\"catch\"](9);\n\n            _iterator.e(_context3.t0);\n\n          case 23:\n            _context3.prev = 23;\n\n            _iterator.f();\n\n            return _context3.finish(23);\n\n          case 26:\n            // This will be unpopulated if there was no 'send_to' field , or\n            // if not all entries in the 'send_to' field could be mapped to\n            // a FID. In these cases, wait on all pending initialization promises.\n            if (initializationPromisesToWaitFor.length === 0) {\n              initializationPromisesToWaitFor = Object.values(initializationPromisesMap);\n            } // Run core gtag function with args after all relevant initialization\n            // promises have been resolved.\n\n\n            _context3.next = 29;\n            return Promise.all(initializationPromisesToWaitFor);\n\n          case 29:\n            // Workaround for http://b/141370449 - third argument cannot be undefined.\n            gtagCore(\"event\"\n            /* EVENT */\n            , measurementId, gtagParams || {});\n            _context3.next = 35;\n            break;\n\n          case 32:\n            _context3.prev = 32;\n            _context3.t1 = _context3[\"catch\"](0);\n            logger.error(_context3.t1);\n\n          case 35:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 32], [9, 20, 23, 26]]);\n  }));\n  return _gtagOnEvent.apply(this, arguments);\n}\n\nfunction wrapGtag(gtagCore,\n/**\r\n * Allows wrapped gtag calls to wait on whichever intialization promises are required,\r\n * depending on the contents of the gtag params' `send_to` field, if any.\r\n */\ninitializationPromisesMap,\n/**\r\n * Wrapped gtag calls sometimes require all dynamic config fetches to have returned\r\n * before determining what initialization promises (which include FIDs) to wait for.\r\n */\ndynamicConfigPromisesList,\n/**\r\n * Wrapped gtag config calls can narrow down which initialization promise (with FID)\r\n * to wait for if the measurementId is already fetched, by getting the corresponding appId,\r\n * which is the key for the initialization promises map.\r\n */\nmeasurementIdToAppId) {\n  /**\r\n   * Wrapper around gtag that ensures FID is sent with gtag calls.\r\n   * @param command Gtag command type.\r\n   * @param idOrNameOrParams Measurement ID if command is EVENT/CONFIG, params if command is SET.\r\n   * @param gtagParams Params if event is EVENT/CONFIG.\r\n   */\n  function gtagWrapper(_x12, _x13, _x14) {\n    return _gtagWrapper.apply(this, arguments);\n  }\n\n  function _gtagWrapper() {\n    _gtagWrapper = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(command, idOrNameOrParams, gtagParams) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!(command === \"event\"\n              /* EVENT */\n              )) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 4;\n              return gtagOnEvent(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, idOrNameOrParams, gtagParams);\n\n            case 4:\n              _context.next = 12;\n              break;\n\n            case 6:\n              if (!(command === \"config\"\n              /* CONFIG */\n              )) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 9;\n              return gtagOnConfig(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, idOrNameOrParams, gtagParams);\n\n            case 9:\n              _context.next = 12;\n              break;\n\n            case 11:\n              // If SET, second arg must be params.\n              gtagCore(\"set\"\n              /* SET */\n              , idOrNameOrParams);\n\n            case 12:\n              _context.next = 17;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](0);\n              logger.error(_context.t0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 14]]);\n    }));\n    return _gtagWrapper.apply(this, arguments);\n  }\n\n  return gtagWrapper;\n}\n/**\r\n * Creates global gtag function or wraps existing one if found.\r\n * This wrapped function attaches Firebase instance ID (FID) to gtag 'config' and\r\n * 'event' calls that belong to the GAID associated with this Firebase instance.\r\n *\r\n * @param initializationPromisesMap Map of appIds to their initialization promises.\r\n * @param dynamicConfigPromisesList Array of dynamic config fetch promises.\r\n * @param measurementIdToAppId Map of GA measurementIDs to corresponding Firebase appId.\r\n * @param dataLayerName Name of global GA datalayer array.\r\n * @param gtagFunctionName Name of global gtag function (\"gtag\" if not user-specified).\r\n */\n\n\nfunction wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagFunctionName) {\n  // Create a basic core gtag function\n  var gtagCore = function gtagCore() {\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    // Must push IArguments object, not an array.\n    window[dataLayerName].push(arguments);\n  }; // Replace it with existing one if found\n\n\n  if (window[gtagFunctionName] && typeof window[gtagFunctionName] === 'function') {\n    // @ts-ignore\n    gtagCore = window[gtagFunctionName];\n  }\n\n  window[gtagFunctionName] = wrapGtag(gtagCore, initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId);\n  return {\n    gtagCore: gtagCore,\n    wrappedGtag: window[gtagFunctionName]\n  };\n}\n/**\r\n * Returns first script tag in DOM matching our gtag url pattern.\r\n */\n\n\nfunction findGtagScriptOnPage() {\n  var scriptTags = window.document.getElementsByTagName('script');\n\n  for (var _i = 0, _Object$values = Object.values(scriptTags); _i < _Object$values.length; _i++) {\n    var tag = _Object$values[_i];\n\n    if (tag.src && tag.src.includes(GTAG_URL)) {\n      return tag;\n    }\n  }\n\n  return null;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nvar ERRORS = (_ERRORS = {}, _defineProperty(_ERRORS, \"already-exists\"\n/* ALREADY_EXISTS */\n, 'A Firebase Analytics instance with the appId {$id} ' + ' already exists. ' + 'Only one Firebase Analytics instance can be created for each appId.'), _defineProperty(_ERRORS, \"already-initialized\"\n/* ALREADY_INITIALIZED */\n, 'initializeAnalytics() cannot be called again with different options than those ' + 'it was initially called with. It can be called again with the same options to ' + 'return the existing instance, or getAnalytics() can be used ' + 'to get a reference to the already-intialized instance.'), _defineProperty(_ERRORS, \"already-initialized-settings\"\n/* ALREADY_INITIALIZED_SETTINGS */\n, 'Firebase Analytics has already been initialized.' + 'settings() must be called before initializing any Analytics instance' + 'or it will have no effect.'), _defineProperty(_ERRORS, \"interop-component-reg-failed\"\n/* INTEROP_COMPONENT_REG_FAILED */\n, 'Firebase Analytics Interop Component failed to instantiate: {$reason}'), _defineProperty(_ERRORS, \"invalid-analytics-context\"\n/* INVALID_ANALYTICS_CONTEXT */\n, 'Firebase Analytics is not supported in this environment. ' + 'Wrap initialization of analytics in analytics.isSupported() ' + 'to prevent initialization in unsupported environments. Details: {$errorInfo}'), _defineProperty(_ERRORS, \"indexeddb-unavailable\"\n/* INDEXEDDB_UNAVAILABLE */\n, 'IndexedDB unavailable or restricted in this environment. ' + 'Wrap initialization of analytics in analytics.isSupported() ' + 'to prevent initialization in unsupported environments. Details: {$errorInfo}'), _defineProperty(_ERRORS, \"fetch-throttle\"\n/* FETCH_THROTTLE */\n, 'The config fetch request timed out while in an exponential backoff state.' + ' Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.'), _defineProperty(_ERRORS, \"config-fetch-failed\"\n/* CONFIG_FETCH_FAILED */\n, 'Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}'), _defineProperty(_ERRORS, \"no-api-key\"\n/* NO_API_KEY */\n, 'The \"apiKey\" field is empty in the local Firebase config. Firebase Analytics requires this field to' + 'contain a valid API key.'), _defineProperty(_ERRORS, \"no-app-id\"\n/* NO_APP_ID */\n, 'The \"appId\" field is empty in the local Firebase config. Firebase Analytics requires this field to' + 'contain a valid app ID.'), _ERRORS);\nvar ERROR_FACTORY = new ErrorFactory('analytics', 'Analytics', ERRORS);\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Backoff factor for 503 errors, which we want to be conservative about\r\n * to avoid overloading servers. Each retry interval will be\r\n * BASE_INTERVAL_MILLIS * LONG_RETRY_FACTOR ^ retryCount, so the second one\r\n * will be ~30 seconds (with fuzzing).\r\n */\n\nvar LONG_RETRY_FACTOR = 30;\n/**\r\n * Base wait interval to multiplied by backoffFactor^backoffCount.\r\n */\n\nvar BASE_INTERVAL_MILLIS = 1000;\n/**\r\n * Stubbable retry data storage class.\r\n */\n\nvar RetryData = /*#__PURE__*/function () {\n  function RetryData() {\n    var throttleMetadata = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var intervalMillis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : BASE_INTERVAL_MILLIS;\n\n    _classCallCheck(this, RetryData);\n\n    this.throttleMetadata = throttleMetadata;\n    this.intervalMillis = intervalMillis;\n  }\n\n  _createClass(RetryData, [{\n    key: \"getThrottleMetadata\",\n    value: function getThrottleMetadata(appId) {\n      return this.throttleMetadata[appId];\n    }\n  }, {\n    key: \"setThrottleMetadata\",\n    value: function setThrottleMetadata(appId, metadata) {\n      this.throttleMetadata[appId] = metadata;\n    }\n  }, {\n    key: \"deleteThrottleMetadata\",\n    value: function deleteThrottleMetadata(appId) {\n      delete this.throttleMetadata[appId];\n    }\n  }]);\n\n  return RetryData;\n}();\n\nvar defaultRetryData = new RetryData();\n/**\r\n * Set GET request headers.\r\n * @param apiKey App API key.\r\n */\n\nfunction getHeaders(apiKey) {\n  return new Headers({\n    Accept: 'application/json',\n    'x-goog-api-key': apiKey\n  });\n}\n/**\r\n * Fetches dynamic config from backend.\r\n * @param app Firebase app to fetch config for.\r\n */\n\n\nfunction fetchDynamicConfig(_x15) {\n  return _fetchDynamicConfig.apply(this, arguments);\n}\n/**\r\n * Fetches dynamic config from backend, retrying if failed.\r\n * @param app Firebase app to fetch config for.\r\n */\n\n\nfunction _fetchDynamicConfig() {\n  _fetchDynamicConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(appFields) {\n    var _a, appId, apiKey, request, appUrl, response, errorMessage, jsonResponse;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            appId = appFields.appId, apiKey = appFields.apiKey;\n            request = {\n              method: 'GET',\n              headers: getHeaders(apiKey)\n            };\n            appUrl = DYNAMIC_CONFIG_URL.replace('{app-id}', appId);\n            _context4.next = 5;\n            return fetch(appUrl, request);\n\n          case 5:\n            response = _context4.sent;\n\n            if (!(response.status !== 200 && response.status !== 304)) {\n              _context4.next = 18;\n              break;\n            }\n\n            errorMessage = '';\n            _context4.prev = 8;\n            _context4.next = 11;\n            return response.json();\n\n          case 11:\n            jsonResponse = _context4.sent;\n\n            if ((_a = jsonResponse.error) === null || _a === void 0 ? void 0 : _a.message) {\n              errorMessage = jsonResponse.error.message;\n            }\n\n            _context4.next = 17;\n            break;\n\n          case 15:\n            _context4.prev = 15;\n            _context4.t0 = _context4[\"catch\"](8);\n\n          case 17:\n            throw ERROR_FACTORY.create(\"config-fetch-failed\"\n            /* CONFIG_FETCH_FAILED */\n            , {\n              httpStatus: response.status,\n              responseMessage: errorMessage\n            });\n\n          case 18:\n            return _context4.abrupt(\"return\", response.json());\n\n          case 19:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[8, 15]]);\n  }));\n  return _fetchDynamicConfig.apply(this, arguments);\n}\n\nfunction fetchDynamicConfigWithRetry(_x16) {\n  return _fetchDynamicConfigWithRetry.apply(this, arguments);\n}\n/**\r\n * Runs one retry attempt.\r\n * @param appFields Necessary app config fields.\r\n * @param throttleMetadata Ongoing metadata to determine throttling times.\r\n * @param signal Abort signal.\r\n */\n\n\nfunction _fetchDynamicConfigWithRetry() {\n  _fetchDynamicConfigWithRetry = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(app) {\n    var retryData,\n        timeoutMillis,\n        _app$options,\n        appId,\n        apiKey,\n        measurementId,\n        throttleMetadata,\n        signal,\n        _args7 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            retryData = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : defaultRetryData;\n            timeoutMillis = _args7.length > 2 ? _args7[2] : undefined;\n            _app$options = app.options, appId = _app$options.appId, apiKey = _app$options.apiKey, measurementId = _app$options.measurementId;\n\n            if (appId) {\n              _context6.next = 5;\n              break;\n            }\n\n            throw ERROR_FACTORY.create(\"no-app-id\"\n            /* NO_APP_ID */\n            );\n\n          case 5:\n            if (apiKey) {\n              _context6.next = 9;\n              break;\n            }\n\n            if (!measurementId) {\n              _context6.next = 8;\n              break;\n            }\n\n            return _context6.abrupt(\"return\", {\n              measurementId: measurementId,\n              appId: appId\n            });\n\n          case 8:\n            throw ERROR_FACTORY.create(\"no-api-key\"\n            /* NO_API_KEY */\n            );\n\n          case 9:\n            throttleMetadata = retryData.getThrottleMetadata(appId) || {\n              backoffCount: 0,\n              throttleEndTimeMillis: Date.now()\n            };\n            signal = new AnalyticsAbortSignal();\n            setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n              return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      // Note a very low delay, eg < 10ms, can elapse before listeners are initialized.\n                      signal.abort();\n\n                    case 1:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, _callee5);\n            })), timeoutMillis !== undefined ? timeoutMillis : FETCH_TIMEOUT_MILLIS);\n            return _context6.abrupt(\"return\", attemptFetchDynamicConfigWithRetry({\n              appId: appId,\n              apiKey: apiKey,\n              measurementId: measurementId\n            }, throttleMetadata, signal, retryData));\n\n          case 13:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _fetchDynamicConfigWithRetry.apply(this, arguments);\n}\n\nfunction attemptFetchDynamicConfigWithRetry(_x17, _x18, _x19) {\n  return _attemptFetchDynamicConfigWithRetry.apply(this, arguments);\n}\n/**\r\n * Supports waiting on a backoff by:\r\n *\r\n * <ul>\r\n *   <li>Promisifying setTimeout, so we can set a timeout in our Promise chain</li>\r\n *   <li>Listening on a signal bus for abort events, just like the Fetch API</li>\r\n *   <li>Failing in the same way the Fetch API fails, so timing out a live request and a throttled\r\n *       request appear the same.</li>\r\n * </ul>\r\n *\r\n * <p>Visible for testing.\r\n */\n\n\nfunction _attemptFetchDynamicConfigWithRetry() {\n  _attemptFetchDynamicConfigWithRetry = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(appFields, _ref, signal) {\n    var throttleEndTimeMillis,\n        backoffCount,\n        retryData,\n        appId,\n        measurementId,\n        response,\n        backoffMillis,\n        throttleMetadata,\n        _args8 = arguments;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            throttleEndTimeMillis = _ref.throttleEndTimeMillis, backoffCount = _ref.backoffCount;\n            retryData = _args8.length > 3 && _args8[3] !== undefined ? _args8[3] : defaultRetryData;\n            appId = appFields.appId, measurementId = appFields.measurementId; // Starts with a (potentially zero) timeout to support resumption from stored state.\n            // Ensures the throttle end time is honored if the last attempt timed out.\n            // Note the SDK will never make a request if the fetch timeout expires at this point.\n\n            _context7.prev = 3;\n            _context7.next = 6;\n            return setAbortableTimeout(signal, throttleEndTimeMillis);\n\n          case 6:\n            _context7.next = 14;\n            break;\n\n          case 8:\n            _context7.prev = 8;\n            _context7.t0 = _context7[\"catch\"](3);\n\n            if (!measurementId) {\n              _context7.next = 13;\n              break;\n            }\n\n            logger.warn(\"Timed out fetching this Firebase app's measurement ID from the server.\" + \" Falling back to the measurement ID \".concat(measurementId) + \" provided in the \\\"measurementId\\\" field in the local Firebase config. [\".concat(_context7.t0.message, \"]\"));\n            return _context7.abrupt(\"return\", {\n              appId: appId,\n              measurementId: measurementId\n            });\n\n          case 13:\n            throw _context7.t0;\n\n          case 14:\n            _context7.prev = 14;\n            _context7.next = 17;\n            return fetchDynamicConfig(appFields);\n\n          case 17:\n            response = _context7.sent;\n            // Note the SDK only clears throttle state if response is success or non-retriable.\n            retryData.deleteThrottleMetadata(appId);\n            return _context7.abrupt(\"return\", response);\n\n          case 22:\n            _context7.prev = 22;\n            _context7.t1 = _context7[\"catch\"](14);\n\n            if (isRetriableError(_context7.t1)) {\n              _context7.next = 32;\n              break;\n            }\n\n            retryData.deleteThrottleMetadata(appId);\n\n            if (!measurementId) {\n              _context7.next = 31;\n              break;\n            }\n\n            logger.warn(\"Failed to fetch this Firebase app's measurement ID from the server.\" + \" Falling back to the measurement ID \".concat(measurementId) + \" provided in the \\\"measurementId\\\" field in the local Firebase config. [\".concat(_context7.t1.message, \"]\"));\n            return _context7.abrupt(\"return\", {\n              appId: appId,\n              measurementId: measurementId\n            });\n\n          case 31:\n            throw _context7.t1;\n\n          case 32:\n            backoffMillis = Number(_context7.t1.customData.httpStatus) === 503 ? calculateBackoffMillis(backoffCount, retryData.intervalMillis, LONG_RETRY_FACTOR) : calculateBackoffMillis(backoffCount, retryData.intervalMillis); // Increments backoff state.\n\n            throttleMetadata = {\n              throttleEndTimeMillis: Date.now() + backoffMillis,\n              backoffCount: backoffCount + 1\n            }; // Persists state.\n\n            retryData.setThrottleMetadata(appId, throttleMetadata);\n            logger.debug(\"Calling attemptFetch again in \".concat(backoffMillis, \" millis\"));\n            return _context7.abrupt(\"return\", attemptFetchDynamicConfigWithRetry(appFields, throttleMetadata, signal, retryData));\n\n          case 37:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[3, 8], [14, 22]]);\n  }));\n  return _attemptFetchDynamicConfigWithRetry.apply(this, arguments);\n}\n\nfunction setAbortableTimeout(signal, throttleEndTimeMillis) {\n  return new Promise(function (resolve, reject) {\n    // Derives backoff from given end time, normalizing negative numbers to zero.\n    var backoffMillis = Math.max(throttleEndTimeMillis - Date.now(), 0);\n    var timeout = setTimeout(resolve, backoffMillis); // Adds listener, rather than sets onabort, because signal is a shared object.\n\n    signal.addEventListener(function () {\n      clearTimeout(timeout); // If the request completes before this timeout, the rejection has no effect.\n\n      reject(ERROR_FACTORY.create(\"fetch-throttle\"\n      /* FETCH_THROTTLE */\n      , {\n        throttleEndTimeMillis: throttleEndTimeMillis\n      }));\n    });\n  });\n}\n/**\r\n * Returns true if the {@link Error} indicates a fetch request may succeed later.\r\n */\n\n\nfunction isRetriableError(e) {\n  if (!(e instanceof FirebaseError) || !e.customData) {\n    return false;\n  } // Uses string index defined by ErrorData, which FirebaseError implements.\n\n\n  var httpStatus = Number(e.customData['httpStatus']);\n  return httpStatus === 429 || httpStatus === 500 || httpStatus === 503 || httpStatus === 504;\n}\n/**\r\n * Shims a minimal AbortSignal (copied from Remote Config).\r\n *\r\n * <p>AbortController's AbortSignal conveniently decouples fetch timeout logic from other aspects\r\n * of networking, such as retries. Firebase doesn't use AbortController enough to justify a\r\n * polyfill recommendation, like we do with the Fetch API, but this minimal shim can easily be\r\n * swapped out if/when we do.\r\n */\n\n\nvar AnalyticsAbortSignal = /*#__PURE__*/function () {\n  function AnalyticsAbortSignal() {\n    _classCallCheck(this, AnalyticsAbortSignal);\n\n    this.listeners = [];\n  }\n\n  _createClass(AnalyticsAbortSignal, [{\n    key: \"addEventListener\",\n    value: function addEventListener(listener) {\n      this.listeners.push(listener);\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this.listeners.forEach(function (listener) {\n        return listener();\n      });\n    }\n  }]);\n\n  return AnalyticsAbortSignal;\n}();\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction validateIndexedDB() {\n  return _validateIndexedDB.apply(this, arguments);\n}\n/**\r\n * Initialize the analytics instance in gtag.js by calling config command with fid.\r\n *\r\n * NOTE: We combine analytics initialization and setting fid together because we want fid to be\r\n * part of the `page_view` event that's sent during the initialization\r\n * @param app Firebase app\r\n * @param gtagCore The gtag function that's not wrapped.\r\n * @param dynamicConfigPromisesList Array of all dynamic config promises.\r\n * @param measurementIdToAppId Maps measurementID to appID.\r\n * @param installations _FirebaseInstallationsInternal instance.\r\n *\r\n * @returns Measurement ID.\r\n */\n\n\nfunction _validateIndexedDB() {\n  _validateIndexedDB = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            if (isIndexedDBAvailable()) {\n              _context8.next = 5;\n              break;\n            }\n\n            logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\"\n            /* INDEXEDDB_UNAVAILABLE */\n            , {\n              errorInfo: 'IndexedDB is not available in this environment.'\n            }).message);\n            return _context8.abrupt(\"return\", false);\n\n          case 5:\n            _context8.prev = 5;\n            _context8.next = 8;\n            return validateIndexedDBOpenable();\n\n          case 8:\n            _context8.next = 14;\n            break;\n\n          case 10:\n            _context8.prev = 10;\n            _context8.t0 = _context8[\"catch\"](5);\n            logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\"\n            /* INDEXEDDB_UNAVAILABLE */\n            , {\n              errorInfo: _context8.t0\n            }).message);\n            return _context8.abrupt(\"return\", false);\n\n          case 14:\n            return _context8.abrupt(\"return\", true);\n\n          case 15:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[5, 10]]);\n  }));\n  return _validateIndexedDB.apply(this, arguments);\n}\n\nfunction _initializeAnalytics(_x20, _x21, _x22, _x23, _x24, _x25, _x26) {\n  return _initializeAnalytics2.apply(this, arguments);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Analytics Service class.\r\n */\n\n\nfunction _initializeAnalytics2() {\n  _initializeAnalytics2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCore, dataLayerName, options) {\n    var _a, dynamicConfigPromise, fidPromise, _yield$Promise$all, _yield$Promise$all2, dynamicConfig, fid, configProperties;\n\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            dynamicConfigPromise = fetchDynamicConfigWithRetry(app); // Once fetched, map measurementIds to appId, for ease of lookup in wrapped gtag function.\n\n            dynamicConfigPromise.then(function (config) {\n              measurementIdToAppId[config.measurementId] = config.appId;\n\n              if (app.options.measurementId && config.measurementId !== app.options.measurementId) {\n                logger.warn(\"The measurement ID in the local Firebase config (\".concat(app.options.measurementId, \")\") + \" does not match the measurement ID fetched from the server (\".concat(config.measurementId, \").\") + \" To ensure analytics events are always sent to the correct Analytics property,\" + \" update the\" + \" measurement ID field in the local config or remove it from the local config.\");\n              }\n            }).catch(function (e) {\n              return logger.error(e);\n            }); // Add to list to track state of all dynamic config promises.\n\n            dynamicConfigPromisesList.push(dynamicConfigPromise);\n            fidPromise = validateIndexedDB().then(function (envIsValid) {\n              if (envIsValid) {\n                return installations.getId();\n              } else {\n                return undefined;\n              }\n            });\n            _context9.next = 6;\n            return Promise.all([dynamicConfigPromise, fidPromise]);\n\n          case 6:\n            _yield$Promise$all = _context9.sent;\n            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n            dynamicConfig = _yield$Promise$all2[0];\n            fid = _yield$Promise$all2[1];\n\n            // Detect if user has already put the gtag <script> tag on this page.\n            if (!findGtagScriptOnPage()) {\n              insertScriptTag(dataLayerName, dynamicConfig.measurementId);\n            } // This command initializes gtag.js and only needs to be called once for the entire web app,\n            // but since it is idempotent, we can call it multiple times.\n            // We keep it together with other initialization logic for better code structure.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n            gtagCore('js', new Date()); // User config added first. We don't want users to accidentally overwrite\n            // base Firebase config properties.\n\n            configProperties = (_a = options === null || options === void 0 ? void 0 : options.config) !== null && _a !== void 0 ? _a : {}; // guard against developers accidentally setting properties with prefix `firebase_`\n\n            configProperties[ORIGIN_KEY] = 'firebase';\n            configProperties.update = true;\n\n            if (fid != null) {\n              configProperties[GA_FID_KEY] = fid;\n            } // It should be the first config command called on this GA-ID\n            // Initialize this GA-ID and set FID on it using the gtag config API.\n            // Note: This will trigger a page_view event unless 'send_page_view' is set to false in\n            // `configProperties`.\n\n\n            gtagCore(\"config\"\n            /* CONFIG */\n            , dynamicConfig.measurementId, configProperties);\n            return _context9.abrupt(\"return\", dynamicConfig.measurementId);\n\n          case 18:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _initializeAnalytics2.apply(this, arguments);\n}\n\nvar AnalyticsService = /*#__PURE__*/function () {\n  function AnalyticsService(app) {\n    _classCallCheck(this, AnalyticsService);\n\n    this.app = app;\n  }\n\n  _createClass(AnalyticsService, [{\n    key: \"_delete\",\n    value: function _delete() {\n      delete initializationPromisesMap[this.app.options.appId];\n      return Promise.resolve();\n    }\n  }]);\n\n  return AnalyticsService;\n}();\n/**\r\n * Maps appId to full initialization promise. Wrapped gtag calls must wait on\r\n * all or some of these, depending on the call's `send_to` param and the status\r\n * of the dynamic config fetches (see below).\r\n */\n\n\nvar initializationPromisesMap = {};\n/**\r\n * List of dynamic config fetch promises. In certain cases, wrapped gtag calls\r\n * wait on all these to be complete in order to determine if it can selectively\r\n * wait for only certain initialization (FID) promises or if it must wait for all.\r\n */\n\nvar dynamicConfigPromisesList = [];\n/**\r\n * Maps fetched measurementIds to appId. Populated when the app's dynamic config\r\n * fetch completes. If already populated, gtag config calls can use this to\r\n * selectively wait for only this app's initialization promise (FID) instead of all\r\n * initialization promises.\r\n */\n\nvar measurementIdToAppId = {};\n/**\r\n * Name for window global data layer array used by GA: defaults to 'dataLayer'.\r\n */\n\nvar dataLayerName = 'dataLayer';\n/**\r\n * Name for window global gtag function used by GA: defaults to 'gtag'.\r\n */\n\nvar gtagName = 'gtag';\n/**\r\n * Reproduction of standard gtag function or reference to existing\r\n * gtag function on window object.\r\n */\n\nvar gtagCoreFunction;\n/**\r\n * Wrapper around gtag function that ensures FID is sent with all\r\n * relevant event and config calls.\r\n */\n\nvar wrappedGtagFunction;\n/**\r\n * Flag to ensure page initialization steps (creation or wrapping of\r\n * dataLayer and gtag script) are only run once per page load.\r\n */\n\nvar globalInitDone = false;\n/**\r\n * Configures Firebase Analytics to use custom `gtag` or `dataLayer` names.\r\n * Intended to be used if `gtag.js` script has been installed on\r\n * this page independently of Firebase Analytics, and is using non-default\r\n * names for either the `gtag` function or for `dataLayer`.\r\n * Must be called before calling `getAnalytics()` or it won't\r\n * have any effect.\r\n *\r\n * @public\r\n *\r\n * @param options - Custom gtag and dataLayer names.\r\n */\n\nfunction settings(options) {\n  if (globalInitDone) {\n    throw ERROR_FACTORY.create(\"already-initialized\"\n    /* ALREADY_INITIALIZED */\n    );\n  }\n\n  if (options.dataLayerName) {\n    dataLayerName = options.dataLayerName;\n  }\n\n  if (options.gtagName) {\n    gtagName = options.gtagName;\n  }\n}\n/**\r\n * Returns true if no environment mismatch is found.\r\n * If environment mismatches are found, throws an INVALID_ANALYTICS_CONTEXT\r\n * error that also lists details for each mismatch found.\r\n */\n\n\nfunction warnOnBrowserContextMismatch() {\n  var mismatchedEnvMessages = [];\n\n  if (isBrowserExtension()) {\n    mismatchedEnvMessages.push('This is a browser extension environment.');\n  }\n\n  if (!areCookiesEnabled()) {\n    mismatchedEnvMessages.push('Cookies are not available.');\n  }\n\n  if (mismatchedEnvMessages.length > 0) {\n    var details = mismatchedEnvMessages.map(function (message, index) {\n      return \"(\".concat(index + 1, \") \").concat(message);\n    }).join(' ');\n    var err = ERROR_FACTORY.create(\"invalid-analytics-context\"\n    /* INVALID_ANALYTICS_CONTEXT */\n    , {\n      errorInfo: details\n    });\n    logger.warn(err.message);\n  }\n}\n/**\r\n * Analytics instance factory.\r\n * @internal\r\n */\n\n\nfunction factory(app, installations, options) {\n  warnOnBrowserContextMismatch();\n  var appId = app.options.appId;\n\n  if (!appId) {\n    throw ERROR_FACTORY.create(\"no-app-id\"\n    /* NO_APP_ID */\n    );\n  }\n\n  if (!app.options.apiKey) {\n    if (app.options.measurementId) {\n      logger.warn(\"The \\\"apiKey\\\" field is empty in the local Firebase config. This is needed to fetch the latest\" + \" measurement ID for this Firebase app. Falling back to the measurement ID \".concat(app.options.measurementId) + \" provided in the \\\"measurementId\\\" field in the local Firebase config.\");\n    } else {\n      throw ERROR_FACTORY.create(\"no-api-key\"\n      /* NO_API_KEY */\n      );\n    }\n  }\n\n  if (initializationPromisesMap[appId] != null) {\n    throw ERROR_FACTORY.create(\"already-exists\"\n    /* ALREADY_EXISTS */\n    , {\n      id: appId\n    });\n  }\n\n  if (!globalInitDone) {\n    // Steps here should only be done once per page: creation or wrapping\n    // of dataLayer and global gtag function.\n    getOrCreateDataLayer(dataLayerName);\n\n    var _wrapOrCreateGtag = wrapOrCreateGtag(initializationPromisesMap, dynamicConfigPromisesList, measurementIdToAppId, dataLayerName, gtagName),\n        wrappedGtag = _wrapOrCreateGtag.wrappedGtag,\n        gtagCore = _wrapOrCreateGtag.gtagCore;\n\n    wrappedGtagFunction = wrappedGtag;\n    gtagCoreFunction = gtagCore;\n    globalInitDone = true;\n  } // Async but non-blocking.\n  // This map reflects the completion state of all promises for each appId.\n\n\n  initializationPromisesMap[appId] = _initializeAnalytics(app, dynamicConfigPromisesList, measurementIdToAppId, installations, gtagCoreFunction, dataLayerName, options);\n  var analyticsInstance = new AnalyticsService(app);\n  return analyticsInstance;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Logs an analytics event through the Firebase SDK.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param eventName Google Analytics event name, choose from standard list or use a custom string.\r\n * @param eventParams Analytics event parameters.\r\n */\n\n\nfunction logEvent$1(_x27, _x28, _x29, _x30, _x31) {\n  return _logEvent$.apply(this, arguments);\n}\n/**\r\n * Set screen_name parameter for this Google Analytics ID.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param screenName Screen name string to set.\r\n */\n\n\nfunction _logEvent$() {\n  _logEvent$ = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(gtagFunction, initializationPromise, eventName, eventParams, options) {\n    var measurementId, params;\n    return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            if (!(options && options.global)) {\n              _context10.next = 5;\n              break;\n            }\n\n            gtagFunction(\"event\"\n            /* EVENT */\n            , eventName, eventParams);\n            return _context10.abrupt(\"return\");\n\n          case 5:\n            _context10.next = 7;\n            return initializationPromise;\n\n          case 7:\n            measurementId = _context10.sent;\n            params = Object.assign(Object.assign({}, eventParams), {\n              'send_to': measurementId\n            });\n            gtagFunction(\"event\"\n            /* EVENT */\n            , eventName, params);\n\n          case 10:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10);\n  }));\n  return _logEvent$.apply(this, arguments);\n}\n\nfunction setCurrentScreen$1(_x32, _x33, _x34, _x35) {\n  return _setCurrentScreen$.apply(this, arguments);\n}\n/**\r\n * Set user_id parameter for this Google Analytics ID.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param id User ID string to set\r\n */\n\n\nfunction _setCurrentScreen$() {\n  _setCurrentScreen$ = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(gtagFunction, initializationPromise, screenName, options) {\n    var measurementId;\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            if (!(options && options.global)) {\n              _context11.next = 5;\n              break;\n            }\n\n            gtagFunction(\"set\"\n            /* SET */\n            , {\n              'screen_name': screenName\n            });\n            return _context11.abrupt(\"return\", Promise.resolve());\n\n          case 5:\n            _context11.next = 7;\n            return initializationPromise;\n\n          case 7:\n            measurementId = _context11.sent;\n            gtagFunction(\"config\"\n            /* CONFIG */\n            , measurementId, {\n              update: true,\n              'screen_name': screenName\n            });\n\n          case 9:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11);\n  }));\n  return _setCurrentScreen$.apply(this, arguments);\n}\n\nfunction setUserId$1(_x36, _x37, _x38, _x39) {\n  return _setUserId$.apply(this, arguments);\n}\n/**\r\n * Set all other user properties other than user_id and screen_name.\r\n *\r\n * @param gtagFunction Wrapped gtag function that waits for fid to be set before sending an event\r\n * @param properties Map of user properties to set\r\n */\n\n\nfunction _setUserId$() {\n  _setUserId$ = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(gtagFunction, initializationPromise, id, options) {\n    var measurementId;\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            if (!(options && options.global)) {\n              _context12.next = 5;\n              break;\n            }\n\n            gtagFunction(\"set\"\n            /* SET */\n            , {\n              'user_id': id\n            });\n            return _context12.abrupt(\"return\", Promise.resolve());\n\n          case 5:\n            _context12.next = 7;\n            return initializationPromise;\n\n          case 7:\n            measurementId = _context12.sent;\n            gtagFunction(\"config\"\n            /* CONFIG */\n            , measurementId, {\n              update: true,\n              'user_id': id\n            });\n\n          case 9:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12);\n  }));\n  return _setUserId$.apply(this, arguments);\n}\n\nfunction setUserProperties$1(_x40, _x41, _x42, _x43) {\n  return _setUserProperties$.apply(this, arguments);\n}\n/**\r\n * Set whether collection is enabled for this ID.\r\n *\r\n * @param enabled If true, collection is enabled for this ID.\r\n */\n\n\nfunction _setUserProperties$() {\n  _setUserProperties$ = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(gtagFunction, initializationPromise, properties, options) {\n    var flatProperties, _i2, _Object$keys, key, measurementId;\n\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            if (!(options && options.global)) {\n              _context13.next = 7;\n              break;\n            }\n\n            flatProperties = {};\n\n            for (_i2 = 0, _Object$keys = Object.keys(properties); _i2 < _Object$keys.length; _i2++) {\n              key = _Object$keys[_i2];\n              // use dot notation for merge behavior in gtag.js\n              flatProperties[\"user_properties.\".concat(key)] = properties[key];\n            }\n\n            gtagFunction(\"set\"\n            /* SET */\n            , flatProperties);\n            return _context13.abrupt(\"return\", Promise.resolve());\n\n          case 7:\n            _context13.next = 9;\n            return initializationPromise;\n\n          case 9:\n            measurementId = _context13.sent;\n            gtagFunction(\"config\"\n            /* CONFIG */\n            , measurementId, {\n              update: true,\n              'user_properties': properties\n            });\n\n          case 11:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13);\n  }));\n  return _setUserProperties$.apply(this, arguments);\n}\n\nfunction setAnalyticsCollectionEnabled$1(_x44, _x45) {\n  return _setAnalyticsCollectionEnabled$.apply(this, arguments);\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\r\n * Returns an {@link Analytics} instance for the given app.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\n\n\nfunction _setAnalyticsCollectionEnabled$() {\n  _setAnalyticsCollectionEnabled$ = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(initializationPromise, enabled) {\n    var measurementId;\n    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            _context14.next = 2;\n            return initializationPromise;\n\n          case 2:\n            measurementId = _context14.sent;\n            window[\"ga-disable-\".concat(measurementId)] = !enabled;\n\n          case 4:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14);\n  }));\n  return _setAnalyticsCollectionEnabled$.apply(this, arguments);\n}\n\nfunction getAnalytics() {\n  var app = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getApp();\n  app = getModularInstance(app); // Dependencies\n\n  var analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\n\n  if (analyticsProvider.isInitialized()) {\n    return analyticsProvider.getImmediate();\n  }\n\n  return initializeAnalytics(app);\n}\n/**\r\n * Returns an {@link Analytics} instance for the given app.\r\n *\r\n * @public\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} to use.\r\n */\n\n\nfunction initializeAnalytics(app) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  // Dependencies\n  var analyticsProvider = _getProvider(app, ANALYTICS_TYPE);\n\n  if (analyticsProvider.isInitialized()) {\n    var existingInstance = analyticsProvider.getImmediate();\n\n    if (deepEqual(options, analyticsProvider.getOptions())) {\n      return existingInstance;\n    } else {\n      throw ERROR_FACTORY.create(\"already-initialized\"\n      /* ALREADY_INITIALIZED */\n      );\n    }\n  }\n\n  var analyticsInstance = analyticsProvider.initialize({\n    options: options\n  });\n  return analyticsInstance;\n}\n/**\r\n * This is a public static method provided to users that wraps four different checks:\r\n *\r\n * 1. Check if it's not a browser extension environment.\r\n * 2. Check if cookies are enabled in current browser.\r\n * 3. Check if IndexedDB is supported by the browser environment.\r\n * 4. Check if the current browser context is valid for using `IndexedDB.open()`.\r\n *\r\n * @public\r\n *\r\n */\n\n\nfunction isSupported() {\n  return _isSupported.apply(this, arguments);\n}\n/**\r\n * Use gtag `config` command to set `screen_name`.\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param screenName - Screen name to set.\r\n */\n\n\nfunction _isSupported() {\n  _isSupported = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15() {\n    var isDBOpenable;\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            if (!isBrowserExtension()) {\n              _context15.next = 2;\n              break;\n            }\n\n            return _context15.abrupt(\"return\", false);\n\n          case 2:\n            if (areCookiesEnabled()) {\n              _context15.next = 4;\n              break;\n            }\n\n            return _context15.abrupt(\"return\", false);\n\n          case 4:\n            if (isIndexedDBAvailable()) {\n              _context15.next = 6;\n              break;\n            }\n\n            return _context15.abrupt(\"return\", false);\n\n          case 6:\n            _context15.prev = 6;\n            _context15.next = 9;\n            return validateIndexedDBOpenable();\n\n          case 9:\n            isDBOpenable = _context15.sent;\n            return _context15.abrupt(\"return\", isDBOpenable);\n\n          case 13:\n            _context15.prev = 13;\n            _context15.t0 = _context15[\"catch\"](6);\n            return _context15.abrupt(\"return\", false);\n\n          case 16:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15, null, [[6, 13]]);\n  }));\n  return _isSupported.apply(this, arguments);\n}\n\nfunction setCurrentScreen(analyticsInstance, screenName, options) {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  setCurrentScreen$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], screenName, options).catch(function (e) {\n    return logger.error(e);\n  });\n}\n/**\r\n * Use gtag `config` command to set `user_id`.\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param id - User ID to set.\r\n */\n\n\nfunction setUserId(analyticsInstance, id, options) {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  setUserId$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], id, options).catch(function (e) {\n    return logger.error(e);\n  });\n}\n/**\r\n * Use gtag `config` command to set all params specified.\r\n *\r\n * @public\r\n */\n\n\nfunction setUserProperties(analyticsInstance, properties, options) {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  setUserProperties$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], properties, options).catch(function (e) {\n    return logger.error(e);\n  });\n}\n/**\r\n * Sets whether Google Analytics collection is enabled for this app on this device.\r\n * Sets global `window['ga-disable-analyticsId'] = true;`\r\n *\r\n * @public\r\n *\r\n * @param analyticsInstance - The {@link Analytics} instance.\r\n * @param enabled - If true, enables collection, if false, disables it.\r\n */\n\n\nfunction setAnalyticsCollectionEnabled(analyticsInstance, enabled) {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  setAnalyticsCollectionEnabled$1(initializationPromisesMap[analyticsInstance.app.options.appId], enabled).catch(function (e) {\n    return logger.error(e);\n  });\n}\n/**\r\n * Sends a Google Analytics event with given `eventParams`. This method\r\n * automatically associates this logged event with this Firebase web\r\n * app instance on this device.\r\n * List of official event parameters can be found in the gtag.js\r\n * reference documentation:\r\n * {@link https://developers.google.com/gtagjs/reference/ga4-events\r\n * | the GA4 reference documentation}.\r\n *\r\n * @public\r\n */\n\n\nfunction _logEvent(analyticsInstance, eventName, eventParams, options) {\n  analyticsInstance = getModularInstance(analyticsInstance);\n  logEvent$1(wrappedGtagFunction, initializationPromisesMap[analyticsInstance.app.options.appId], eventName, eventParams, options).catch(function (e) {\n    return logger.error(e);\n  });\n}\n\nvar name = \"@firebase/analytics\";\nvar version = \"0.7.5\";\n/**\r\n * Firebase Analytics\r\n *\r\n * @packageDocumentation\r\n */\n\nfunction registerAnalytics() {\n  _registerComponent(new Component(ANALYTICS_TYPE, function (container, _ref2) {\n    var analyticsOptions = _ref2.options;\n    // getImmediate for FirebaseApp will always succeed\n    var app = container.getProvider('app').getImmediate();\n    var installations = container.getProvider('installations-internal').getImmediate();\n    return factory(app, installations, analyticsOptions);\n  }, \"PUBLIC\"\n  /* PUBLIC */\n  ));\n\n  _registerComponent(new Component('analytics-internal', internalFactory, \"PRIVATE\"\n  /* PRIVATE */\n  ));\n\n  registerVersion(name, version); // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n\n  registerVersion(name, version, 'esm2017');\n\n  function internalFactory(container) {\n    try {\n      var analytics = container.getProvider(ANALYTICS_TYPE).getImmediate();\n      return {\n        logEvent: function logEvent(eventName, eventParams, options) {\n          return _logEvent(analytics, eventName, eventParams, options);\n        }\n      };\n    } catch (e) {\n      throw ERROR_FACTORY.create(\"interop-component-reg-failed\"\n      /* INTEROP_COMPONENT_REG_FAILED */\n      , {\n        reason: e\n      });\n    }\n  }\n}\n\nregisterAnalytics();\nexport { getAnalytics, initializeAnalytics, isSupported, _logEvent as logEvent, setAnalyticsCollectionEnabled, setCurrentScreen, setUserId, setUserProperties, settings };"],"names":["_ERROR_DESCRIPTION_MA","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","version","PENDING_TIMEOUT_MS","PACKAGE_VERSION","concat","INTERNAL_AUTH_VERSION","TOKEN_EXPIRATION_BUFFER","ERROR_DESCRIPTION_MAP","ERROR_FACTORY","isServerError","error","code","includes","getInstallationsEndpoint","_ref","projectId","extractAuthTokenInfoFromResponse","response","token","requestStatus","expiresIn","responseExpiresIn","Number","replace","creationTime","Date","now","getErrorFromResponse","_x","_x2","_getErrorFromResponse","apply","this","arguments","_callee","requestName","responseJson","errorData","_context","prev","json","sent","abrupt","create","serverCode","serverMessage","message","serverStatus","status","stop","getHeaders","_ref2","apiKey","Headers","Accept","getHeadersWithAuth","appConfig","_ref3","refreshToken","headers","append","getAuthorizationHeader","retryIfServerError","_x3","_retryIfServerError","_callee2","fn","result","_context2","createInstallationRequest","_x4","_x5","_createInstallationRequest","_callee3","_ref4","fid","endpoint","body","request","responseValue","registeredInstallationEntry","_context3","authVersion","appId","sdkVersion","method","JSON","stringify","fetch","ok","registrationStatus","authToken","sleep","ms","Promise","resolve","setTimeout","VALID_FID_PATTERN","generateFid","fidByteArray","Uint8Array","self","crypto","msCrypto","getRandomValues","array","btoa","String","fromCharCode","substr","encode","_a","getKey","appName","fidChangeCallbacks","Map","fidChanged","key","callFidChangeCallbacks","channel","getBroadcastChannel","postMessage","closeBroadcastChannel","broadcastFidChange","callbacks","get","_step","_iterator","callback","broadcastChannel","BroadcastChannel","onmessage","data","size","close","OBJECT_STORE_NAME","dbPromise","getDbPromise","openDb","upgradeDB","oldVersion","createObjectStore","set","_x6","_x7","_set","_callee4","db","tx","objectStore","oldValue","_context4","transaction","put","complete","remove","_x8","_remove","_callee5","_context5","delete","update","_x9","_x10","_update","_callee6","updateFn","store","newValue","_context6","undefined","getInstallationEntry","_x11","_getInstallationEntry","_callee7","registrationPromise","installationEntry","_context7","oldEntry","updateOrCreateInstallationEntry","entryWithPromise","triggerRegistrationIfNecessary","t0","clearTimedOutRequest","navigator","onLine","reject","inProgressEntry","registrationTime","_x12","_x13","_registerInstallation","registerInstallation","waitUntilFidRegistration","_callee8","_context8","customData","_x14","_waitUntilFidRegistration","_callee9","entry","_yield$getInstallatio","_context9","updateInstallationRequest","generateAuthTokenRequest","_x15","_x16","_generateAuthTokenRequest","_callee10","_ref5","platformLoggerProvider","platformLogger","completedAuthToken","_context10","getGenerateAuthTokenEndpoint","getImmediate","optional","getPlatformInfoString","installation","_ref6","refreshAuthToken","_x17","_refreshAuthToken","_callee11","installations","forceRefresh","tokenPromise","_args11","_context11","isEntryRegistered","oldAuthToken","isAuthTokenValid","waitUntilAuthTokenRequest","makeAuthTokenRequestInProgressEntry","fetchAuthTokenFromServer","_x18","_x19","_waitUntilAuthTokenRequest","_callee12","_context12","updateAuthTokenRequest","requestTime","assign","_x20","_x21","_fetchAuthTokenFromServer","_callee13","updatedInstallationEntry","_updatedInstallationEntry","_context13","isAuthTokenExpired","inProgressAuthToken","_getId","_callee14","installationsImpl","_yield$getInstallatio2","_context14","catch","console","_getToken","_callee15","_args15","_context15","completeInstallationRegistration","_x24","_completeInstallationRegistration","_callee16","_yield$getInstallatio3","_context16","getMissingValueError","valueName","_ERRORS","INSTALLATIONS_NAME","publicFactory","container","app","getProvider","options","_i","_configKeys","keyName","extractAppConfig","_delete","internalFactory","installationsInternal","getId","_x22","_getId2","getToken","_x23","_getToken2","ANALYTICS_TYPE","FETCH_TIMEOUT_MILLIS","DYNAMIC_CONFIG_URL","GTAG_URL","logger","promiseAllSettled","promises","all","map","promise","insertScriptTag","dataLayerName","measurementId","script","document","createElement","src","async","head","appendChild","gtagOnConfig","_gtagOnConfig","gtagCore","initializationPromisesMap","dynamicConfigPromisesList","measurementIdToAppId","gtagParams","correspondingAppId","dynamicConfigResults","foundConfig","find","config","gtagOnEvent","_gtagOnEvent","initializationPromisesToWaitFor","gaSendToList","_loop","sendToId","initializationPromise","push","finish","values","t1","wrapOrCreateGtag","gtagFunctionName","_len","_args","_key","window","_gtagWrapper","command","idOrNameOrParams","wrapGtag","wrappedGtag","findGtagScriptOnPage","scriptTags","getElementsByTagName","_Object$values","tag","ERRORS","RetryData","throttleMetadata","intervalMillis","metadata","defaultRetryData","fetchDynamicConfig","_fetchDynamicConfig","appFields","appUrl","errorMessage","jsonResponse","httpStatus","responseMessage","fetchDynamicConfigWithRetry","_fetchDynamicConfigWithRetry","retryData","timeoutMillis","_app$options","signal","_args7","getThrottleMetadata","backoffCount","throttleEndTimeMillis","AnalyticsAbortSignal","abort","attemptFetchDynamicConfigWithRetry","_attemptFetchDynamicConfigWithRetry","backoffMillis","_args8","setAbortableTimeout","warn","deleteThrottleMetadata","isRetriableError","setThrottleMetadata","debug","Math","max","timeout","addEventListener","clearTimeout","listeners","listener","forEach","validateIndexedDB","_validateIndexedDB","errorInfo","_initializeAnalytics2","dynamicConfigPromise","fidPromise","_yield$Promise$all","_yield$Promise$all2","dynamicConfig","configProperties","then","envIsValid","gtagCoreFunction","wrappedGtagFunction","AnalyticsService","gtagName","globalInitDone","settings","factory","mismatchedEnvMessages","details","index","join","warnOnBrowserContextMismatch","id","dataLayer","getOrCreateDataLayer","_wrapOrCreateGtag","_x25","_x26","_initializeAnalytics","_logEvent$","gtagFunction","eventName","eventParams","params","global","_setCurrentScreen$","screenName","_setUserId$","_setUserProperties$","properties","flatProperties","_i2","_Object$keys","keys","_setAnalyticsCollectionEnabled$","enabled","getAnalytics","analyticsProvider","isInitialized","initializeAnalytics","existingInstance","getOptions","analyticsInstance","initialize","isSupported","_isSupported","isDBOpenable","setCurrentScreen","_x32","_x33","_x34","_x35","setCurrentScreen$1","setUserId","_x36","_x37","_x38","_x39","setUserId$1","setUserProperties","_x40","_x41","_x42","_x43","setUserProperties$1","setAnalyticsCollectionEnabled","_x44","_x45","setAnalyticsCollectionEnabled$1","_logEvent","_x27","_x28","_x29","_x30","_x31","logEvent$1","analyticsOptions","analytics","logEvent","reason"],"sourceRoot":""}